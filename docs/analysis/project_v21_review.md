# TwinStar Quantum: Architecture & Logic Review (v2.1)

ν„μ¬κΉμ§€ μ§„ν–‰λ κ°λ° μƒν™©μ„ λ°”νƒ•μΌλ΅ μ „μ²΄ μ‹μ¤ν…μ λ΅μ§ μμ„μ™€ λ°λ³µλλ” λ¬Έμ μ λ“¤μ„ μ κ²€ν•κ³  κ°μ„  λ°©ν–¥μ„ μ μ•ν•©λ‹λ‹¤.

---

## 1. ν•µμ‹¬ λ΅μ§ νλ¦„ (Logic Pipeline)

μ‹μ¤ν…μ€ **[λ°μ΄ν„° β†’ κ°μ‹ β†’ κ²€μ¦ β†’ μ§‘ν–‰ β†’ κ΄€λ¦¬]**μ 5λ‹¨κ³„ μν™ κµ¬μ΅°λ¥Ό κ°€μ§‘λ‹λ‹¤.

```mermaid
graph TD
    A["<b>1. Data Acquisition</b><br/>Exchange API / WS"] --> B["<b>2. Signal Scanning</b><br/>AlphaX7Core Pattern Check"]
    B --> C{<b>3. Preset Validation</b>}
    C -- "No Preset" --> D["<b>AutoOptimizer</b><br/>Quick Opt (4h)"]
    D --> E["Save SYMBOL_4h.json"]
    E --> F
    C -- "Has Preset" --> F["<b>4. Execution Entry</b><br/>OrderExecutor<br/><i>(Adaptive Leverage)</i>"]
    F --> G["<b>5. Capital & Risk</b><br/>CapitalManager<br/>PnLTracker"]
    G --> H{Exit Criteria?}
    H -- "TP/SL Hit" --> I["Close Position"]
    I --> G
    H -- "Monitoring" --> B
```

### μƒμ„Έ λ΅μ§ μμ„
1.  **κ°μ‹ (Scan)**: `MultiTrader`κ°€ κ±°λλ‰ μƒμ„ Nκ° μ‹¬λ³Όμ 15λ¶„ μ°¨νΈλ¥Ό μ „μ μ΅°μ‚¬ν•©λ‹λ‹¤.
2.  **κ²€μ§€ (Detect)**: `AlphaX7Core`κ°€ W/M ν¨ν„΄ λ° μ¶”μ„Έ μ΅°κ±΄μ„ ν•„ν„°λ§ν•μ—¬ 'κ°•λ„'λ¥Ό κ³„μ‚°ν•©λ‹λ‹¤.
3.  **κ²€μ¦ (Optimize)**: μ§„μ… μ „ ν•΄λ‹Ή μ‹¬λ³Όμ ν”„λ¦¬μ…‹μ΄ μλ”μ§€ ν™•μΈν•κ³ , μ—†μΌλ©΄ `AutoOptimizer`λ¥Ό ν†µν•΄ μ‹¤μ‹κ°„μΌλ΅ μ„±κ³Όλ¥Ό κ²€μ¦ν•μ—¬ μµμ  νλΌλ―Έν„°λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
4.  **μ§„μ… (Entry)**: `CapitalManager`μ—μ„ κ°€μ© μ‹λ“λ¥Ό κ°€μ Έμ¤κ³ , μ‹¬λ³Ό μ„±κ²©(λ©”μ΄μ €/μ•νΈ)μ— λ”°λΌ λ λ²„λ¦¬μ§€λ¥Ό μ°¨λ“±ν™”ν•μ—¬ μ£Όλ¬Έμ„ λ„£μµλ‹λ‹¤.
5.  **μ‚¬ν›„ κ΄€λ¦¬ (Management)**: μμµ(PnL)μ„ μ‹¤μ‹κ°„ μ¶”μ ν•κ³ , μλ³Έ λ¨λ“(λ³µλ¦¬/κ³ μ •)μ— λ”°λΌ μ‹λ“λ¥Ό μ¬κ³„μ‚°ν•©λ‹λ‹¤.

---

## 2. λ°λ³µλλ” λ¬Έμ μ  (Recurring Issues)

### π”΄ κΈ°μ μ  λ¶€μ±„
1.  **λΉλ“ λ° λ°°ν¬ μ•μ •μ„±**: μƒλ΅μ΄ μ„μ ―(`TradingTabWidget` λ“±)μ΄ μ¶”κ°€λ  λ•λ§λ‹¤ `.spec` νμΌμ `hiddenimports` λ„λ½μΌλ΅ μΈν• μ‹¤ν–‰ μ—λ¬κ°€ λ°λ³µλ©λ‹λ‹¤.
2.  **λΉ„λ™κΈ° λ£¨ν”„ μ¶©λ**: `asyncio`μ™€ `threading`μ΄ νΌμ©λλ©΄μ„, νΉν μ›Ήμ†μΌ“ μΆ…λ£ μ‹ 'Event loop stopped' νΉμ€ 'No running event loop' μ—λ¬κ°€ μμ£Ό λ°μƒν•©λ‹λ‹¤. (v2.1μ—μ„ λ³΄μ™„ν–μΌλ‚ μ—¬μ „ν λ―Όκ°ν• μμ—­)
3.  **λ°μ΄ν„° ν’μ§ μμ΅΄μ„±**: λ΅μ»¬ μΊμ‹(`.parquet`) λ°μ΄ν„°κ°€ μ¶©λ¶„ν•μ§€ μ•κ±°λ‚ ν•μ‹μ΄ μ–΄κΈ‹λ‚  κ²½μ° `AutoOptimizer`κ°€ κΈ°λ³Έ νλΌλ―Έν„°λ΅ μ‘λ™ν•μ—¬ μ„±λ¥μ΄ μ €ν•λ  μ μμµλ‹λ‹¤.

### π΅ UX/UI λ¬Έμ 
1.  **λ³µμ΅λ„ λ„μ **: ν• ν™”λ©΄μ— λ„λ¬΄ λ§μ€ μ •λ³΄λ¥Ό λ‹΄μΌλ ¤λ‹¤ λ³΄λ‹(μ‹±κΈ€/λ©€ν‹°/ν„ν™©/λ΅κ·Έ), μ§κ΄€μ μΈ λ§¤λ§¤ μƒν™© νλ‹¨μ΄ νλ ¤μ§ λ•κ°€ μμµλ‹λ‹¤. (μ§‘μ¤‘ λ¨λ“ λ„μ…μΌλ΅ μ™„ν™” μ¤‘)
2.  **μ„¤μ •κ°’ ννΈν™”**: μ‹±κΈ€μ€ μ½”μΈλ³„ κ°λ³„ μ„¤μ •, λ©€ν‹°λ” κ³µν†µ μ„¤μ • λ“± μ„¤μ • μ²΄κ³„κ°€ μ΄μ›ν™”λμ–΄ μμ–΄ μ‚¬μ©μ μ΄μ μ‹¤μκ°€ λ°μƒν•  μ—¬μ§€κ°€ μμµλ‹λ‹¤.

---

## 3. ν–¥ν›„ κ°μ„  λ΅μ§ (Refinement Strategy)

1.  **μ„¤μ • μΈν„°νμ΄μ¤ λ‹¨μΌν™”**: μ‹±κΈ€κ³Ό λ©€ν‹°λ¥Ό λ³„κ°μ μ„μ ―μΌλ΅ λ³΄μ§€ μ•κ³ , **"μ „λµ μΈμ¤ν„΄μ¤"** κ°λ…μΌλ΅ ν†µν•©ν•μ—¬ μ–΄λ–¤ μ½”μΈμ΄λ“  λ™μΌν• μ„¤μ • UIλ¥Ό κ±°μ³ μ§„μ…ν•λ„λ΅ λ‹¨μΌν™”κ°€ ν•„μ”ν•©λ‹λ‹¤.
2.  **λ¦¬μ†μ¤ κ΄€λ¦¬ κ°•ν™”**: 50κ° μ΄μƒμ μ½”μΈμ„ κ°μ‹ν•  λ• λ°μƒν•λ” API Rate Limit λ° CPU μ μ μ¨μ„ κ΄€λ¦¬ν•κΈ° μ„ν• **'Batch K-Line Request'** λλ” **'Symbol Rotation'** λ΅μ§ λ„μ…μ΄ κ¶μ¥λ©λ‹λ‹¤.
3.  **Build Automation**: `.spec` νμΌμ„ μλ™μΌλ΅ μμ •ν•λ” λ€μ‹ , `GUI/` λ””λ ‰ν† λ¦¬μ λ¨λ“  νμ΄μ¬ νμΌμ„ μλ™μΌλ΅ νƒμƒ‰ν•μ—¬ `hiddenimports`μ— ν¬ν•¨μ‹ν‚¤λ” λΉλ“ μ¤ν¬λ¦½νΈ κ³ λ„ν™”κ°€ ν•„μ”ν•©λ‹λ‹¤.

---

> [!IMPORTANT]
> **ν„μ¬ μ‹μ¤ν…μ μ™„μ„±λ„λ” "λ΅μ§μ μ—°λ™" μΈ΅λ©΄μ—μ„λ” 90% μ΄μƒ**μ…λ‹λ‹¤. μ΄μ  λ‚¨μ€ λ¶€λ¶„μ€ **"μμ™Έ μ²λ¦¬μ κ²¬κ³ ν•¨"**κ³Ό **"UI κ°€λ…μ„±μ μ •μ "**μ„ μ°λ” λ‹¨κ³„μ…λ‹λ‹¤.
