# TwinStar Quantum UI 개선 계획

> 작성일: 2025-12-21
> 상태: 분석 완료, 수정 대기

---

## 📋 수정 항목 요약

| 구분 | 개수 |
|------|:----:|
| ❌ 삭제 | 2 |
| ➕ 추가 | 10 |
| ✅ 유지 | 1 |

---

## ❌ 삭제할 항목

| # | 위젯 | 항목 | 이유 | 파일 |
|---|------|------|------|------|
| 1 | 설정 | 📊 등급 비교 버튼 | 불필요 (티어팝업으로 대체) | `settings_widget.py` |
| 2 | 백테스트 | 🔄 Reset 버튼 | 불필요 (프리셋 변경으로 초기화) | `backtest_widget.py` |

---

## ➕ 추가할 항목

### 1. 데이터 수집 위젯 (`data_collector_widget.py`)

| # | 버튼 | 기능 | 스타일 |
|---|------|------|--------|
| 1 | Top 50 | 거래량 Top 50 선택 | Blue |
| 2 | Top 100 | 거래량 Top 100 선택 | Blue |
| 3 | 🆕 신규 상장 | 최근 상장 코인 선택 | Green |
| 4 | 📈 급등 | 24h 상승률 Top 선택 | Green |
| 5 | 📉 급락 | 24h 하락률 Top 선택 | Red |

**레이아웃:**
```
[Select All] [Clear All] [Top 10] [Top 50] [Top 100] [🆕신규] [📈급등] [📉급락]
```

---

### 2. 매매 대시보드 (`trading_dashboard.py`)

| # | 버튼 | 기능 | 스타일 | 위치 |
|---|------|------|--------|------|
| 6 | ⏹ 전체 정지 | 모든 봇 정지 | Orange | 상단 |
| 7 | 🚨 긴급 청산 | 모든 포지션 청산 | Red | 상단 |

**레이아웃:**
```
┌─────────────────────────────────────────────────────────────────┐
│ [➕ 코인 추가] ─────────────── [⏹ 전체 정지] [🚨 긴급 청산] │
└─────────────────────────────────────────────────────────────────┘
```

---

### 3. 백테스트 위젯 (`backtest_widget.py`)

| # | 버튼 | 기능 | 스타일 | 위치 |
|---|------|------|--------|------|
| 8 | 💾 결과 저장 | JSON/CSV 저장 | Green | 결과 영역 하단 |

**레이아웃:**
```
┌─ 통계 ───────────────────────────────────────────────────────┐
│ 총거래: 45  │  승률: 68%  │  수익률: +156%  │  [💾 결과 저장] │
└──────────────────────────────────────────────────────────────┘
```

---

### 4. 최적화 위젯 (`optimization_widget.py`)

| # | 버튼 | 기능 | 스타일 | 위치 |
|---|------|------|--------|------|
| 9 | 📊 결과 비교 | 여러 결과 비교 차트 | Blue | 결과 테이블 상단 |
| 10 | 📥 CSV 내보내기 | 결과 CSV 저장 | Gray | 결과 테이블 하단 |

**레이아웃:**
```
┌─ Top 20 결과 ────────────────────────────────────────────────┐
│ [📊 결과 비교] [📥 CSV 내보내기]                              │
├──────────────────────────────────────────────────────────────┤
│ # │ WinRate │ Return │ MDD │ ... │ [적용]                    │
└──────────────────────────────────────────────────────────────┘
```

---

## ✅ 유지할 항목

### 2단계 최적화 (Iterative Refinement)

**위치:** `optimization_widget.py` L366-386

**기능:**
1. 1단계 최적화 완료 후 상위 결과 분석
2. 지배적 파라미터 고정 (85%+ 동일 값)
3. 나머지 파라미터 범위 축소 (5분할)
4. 2단계 정밀 탐색 실행

**동작 흐름:**
```
1단계: 넓은 범위 탐색
  atr_mult: [1.0, 1.5, 2.0, 2.5, 3.0]
         ↓ Top 10 분석
2단계: 좁은 범위 재탐색
  atr_mult: [1.4, 1.5, 1.6, 1.7, 1.8]
```

**결론:** 유용한 기능이므로 **유지**

---

## 📝 구현 순서

| # | 작업 | 파일 | 난이도 |
|---|------|------|:------:|
| 1 | 등급 비교 버튼 삭제 | `settings_widget.py` | ⭐ |
| 2 | Reset 버튼 삭제 | `backtest_widget.py` | ⭐ |
| 3 | 데이터 수집 버튼 5개 추가 | `data_collector_widget.py` | ⭐⭐⭐ |
| 4 | 전체 정지/긴급 청산 추가 | `trading_dashboard.py` | ⭐⭐ |
| 5 | 결과 저장 버튼 추가 | `backtest_widget.py` | ⭐⭐ |
| 6 | 결과 비교/CSV 내보내기 추가 | `optimization_widget.py` | ⭐⭐ |

---

## 🎨 스타일 가이드

### 버튼 색상
```css
/* Primary (Blue) */
background: #2962FF;

/* Success (Green) */
background: #4CAF50;

/* Warning (Orange) */
background: #ff9800;

/* Danger (Red) */
background: #f44336;

/* Secondary (Gray) */
background: #2a2e3b;
```

### 버튼 크기
| 타입 | 패딩 | 예 |
|------|------|-----|
| 아이콘 | 5px 10px | 📖, 📱 |
| 텍스트 | 8px 16px | Top 10 |
| 강조 | 10px 20px | 🚨 긴급 청산 |

---

## ⚠️ 주의사항

1. **긴급 청산 버튼**
   - 확인 다이얼로그 필수
   - 2단계 확인 권장 ("정말 모든 포지션을 청산하시겠습니까?")

2. **신규 상장/급등/급락**
   - 거래소 API 호출 필요
   - 에러 처리 필수

3. **결과 저장**
   - 파일 선택 다이얼로그 사용
   - 기본 경로: `data/results/`

---

## 다음 단계

- [ ] 삭제 항목 구현 (2개)
- [ ] 추가 항목 구현 (10개)
- [ ] 테스트
- [ ] 문서 업데이트
