# ğŸ¯ TwinStar-Quantum ì „ëµ ê°œì„  ê³„íšì„œ

**ì‘ì„±ì¼**: 2026-01-16
**ë²„ì „**: v1.0
**ê¸°ë°˜ ë¬¸ì„œ**: ì „ëµ ì „ì²´ ë¶„ì„ ê°€ì´ë“œ v3.0
**ëª©í‘œ**: ìŠ¹ë¥  85%+, ê±°ë˜ ë¹ˆë„ 0.5íšŒ/ì¼, MDD 15% ì´í•˜

---

## ğŸ“Š í˜„ì¬ ìƒíƒœ ë¶„ì„ (As-Is)

### í˜„ì¬ ìµœê³  ì„±ëŠ¥ í”„ë¦¬ì…‹

**MACD í”„ë¦¬ì…‹** (`bybit_btcusdt_1h_macd.json`):
- ìŠ¹ë¥ : **83.75%** (ëª©í‘œ 80% ë‹¬ì„± âœ…)
- MDD: **10.86%** (ëª©í‘œ 20% ì´í•˜ âœ…)
- Profit Factor: **5.06** (ëª©í‘œ 0.5+ ì´ˆê³¼ âœ…)
- ê±°ë˜ ë¹ˆë„: **1.74íšŒ/ì¼** (ëª©í‘œ 0.5-1.0íšŒ/ì¼ ì´ˆê³¼ âš ï¸)
- ë“±ê¸‰: **A**

### ìµœì í™” ê²°ê³¼ í”„ë¦¬ì…‹ (2026-01-16)

**Phase 5 ìµœì¢…** (`bybit_btcusdt_final_20260116.json`):
- ìŠ¹ë¥ : **79.46%** (ëª©í‘œ 80%ì— 0.54% ë¶€ì¡± âš ï¸)
- MDD: **7.73%** (ëª©í‘œ ëŒ€ë¹„ -61%, ì´ˆê³¼ ë‹¬ì„± âœ…)
- Profit Factor: **4.64** (ì´ˆê³¼ ë‹¬ì„± âœ…)
- ê±°ë˜ ë¹ˆë„: **1.74íšŒ/ì¼** (ëª©í‘œ ì´ˆê³¼ âš ï¸)
- ë“±ê¸‰: **S**

### í•µì‹¬ ë¬¸ì œì  (3ê°€ì§€)

| ë¬¸ì œ | í˜„ì¬ | ëª©í‘œ | ì°¨ì´ | ì‹¬ê°ë„ |
|------|------|------|------|--------|
| **1. ìŠ¹ë¥  ë¯¸ë‹¬** | 79.46% | 80%+ | -0.54% | âš ï¸ ë‚®ìŒ |
| **2. ê±°ë˜ ë¹ˆë„ ê³¼ë‹¤** | 1.74íšŒ/ì¼ | 0.5-1.0íšŒ/ì¼ | +74% | âš ï¸âš ï¸ ì¤‘ê°„ |
| **3. ADX ì „ëµ ì €ì„±ëŠ¥** | PF 0.00 | PF 1.5+ | -100% | âš ï¸âš ï¸âš ï¸ ë†’ìŒ |

---

## ğŸ¯ ê°œì„  ëª©í‘œ (To-Be)

### ìµœì¢… ëª©í‘œ (3ê°œì›” ë‚´)

| ì§€í‘œ | í˜„ì¬ (ìµœê³ ) | ëª©í‘œ | ê°œì„ í­ | ìš°ì„ ìˆœìœ„ |
|------|------------|------|--------|---------|
| **ìŠ¹ë¥ ** | 83.75% | **85%+** | +1.25% | â­â­â­ |
| **MDD** | 7.73% | **15% ì´í•˜** | ìœ ì§€ | â­â­ |
| **ê±°ë˜ ë¹ˆë„** | 1.74íšŒ/ì¼ | **0.5-1.0íšŒ/ì¼** | -43% | â­â­â­â­â­ |
| **PF** | 5.06 | **5.0+ ìœ ì§€** | ìœ ì§€ | â­â­ |

### ë‹¨ê³„ë³„ ëª©í‘œ

**Phase 1 (1ê°œì›”)**: ê±°ë˜ ë¹ˆë„ ê°ì†Œ
- ëª©í‘œ: 1.74íšŒ/ì¼ â†’ 1.0íšŒ/ì¼ (-43%)
- ë°©ë²•: filter_tf ì¡°ì • (4h â†’ 6h/12h)

**Phase 2 (2ê°œì›”)**: ìŠ¹ë¥  í–¥ìƒ
- ëª©í‘œ: 79.46% â†’ 85%+ (+5.54%)
- ë°©ë²•: entry_validity í™•ëŒ€, ADX í•„í„° ì¶”ê°€

**Phase 3 (3ê°œì›”)**: ADX ì „ëµ ê°œì„ 
- ëª©í‘œ: PF 0.00 â†’ 2.0+ (ì‹¤ìš© ê°€ëŠ¥)
- ë°©ë²•: íŒŒë¼ë¯¸í„° ì¬ìµœì í™”, ì „ëµ ë¡œì§ ìˆ˜ì •

---

## ğŸ“‹ ê°œì„  ê³„íš (3ë‹¨ê³„)

### Phase 1: ê±°ë˜ ë¹ˆë„ ìµœì í™” (High Priority)

**ê¸°ê°„**: 1-2ì£¼
**ëª©í‘œ**: 1.74íšŒ/ì¼ â†’ 0.5-1.0íšŒ/ì¼ (-43~71%)
**ë‚œì´ë„**: â­â­ (ì‰¬ì›€)

#### 1.1 filter_tf ì¡°ì • (í•µì‹¬)

**í˜„ì¬ ë¬¸ì œ**:
- filter_tf=4h: ê±°ë˜ ë¹ˆë„ 1.74íšŒ/ì¼ (ê³¼ë‹¤)
- ë¶„ì„ ê°€ì´ë“œì—ì„œ ì˜ˆì¸¡:
  - 6h: 1.0íšŒ/ì¼ (ì ì •)
  - 12h: 0.5íšŒ/ì¼ (ì´ìƒì )
  - 1d: 0.3íšŒ/ì¼ (ë„ˆë¬´ ì ìŒ)

**ê°œì„  ë°©ì•ˆ**:
```python
# Step 1: filter_tf=6h í…ŒìŠ¤íŠ¸
{
  "filter_tf": "6h",  # 4h â†’ 6h
  "entry_validity_hours": 6.0,
  # ë‚˜ë¨¸ì§€ íŒŒë¼ë¯¸í„° ë™ì¼
}

# ì˜ˆìƒ ê²°ê³¼:
# - ìŠ¹ë¥ : 79.46% â†’ 82% (+2.5%)
# - ê±°ë˜ ë¹ˆë„: 1.74íšŒ/ì¼ â†’ 1.0íšŒ/ì¼ (-43%)
# - MDD: 7.73% â†’ 9% (+17%, í—ˆìš© ë²”ìœ„)

# Step 2: filter_tf=12h í…ŒìŠ¤íŠ¸ (ëª©í‘œ ë‹¬ì„±)
{
  "filter_tf": "12h",  # 6h â†’ 12h
  "entry_validity_hours": 6.0,
}

# ì˜ˆìƒ ê²°ê³¼:
# - ìŠ¹ë¥ : 82% â†’ 85%+ (+3%)
# - ê±°ë˜ ë¹ˆë„: 1.0íšŒ/ì¼ â†’ 0.5íšŒ/ì¼ (-50%, ëª©í‘œ ë‹¬ì„±!)
# - MDD: 9% â†’ 10% (í—ˆìš© ë²”ìœ„)
```

**ê²€ì¦ ë°©ë²•**:
```bash
# ë°±í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
python tools/test_filter_tf_hypothesis.py --filter_tf 6h
python tools/test_filter_tf_hypothesis.py --filter_tf 12h
python tools/test_filter_tf_hypothesis.py --filter_tf 1d

# ê²°ê³¼ ë¹„êµ (CSV íŒŒì¼)
# - filter_tf_test_results_YYYYMMDD.csv
```

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„ (ë°±í…ŒìŠ¤íŠ¸ + ë¶„ì„)

#### 1.2 entry_validity_hours í™•ëŒ€ (ë³´ì¡°)

**í˜„ì¬ ë¬¸ì œ**:
- entry_validity=6h: ë¹ ë¥¸ ì§„ì… â†’ ê±°ë˜ ë¹ˆë„ ì¦ê°€
- 2026-01-01 í”„ë¦¬ì…‹ì€ 48h ì‚¬ìš© â†’ ìŠ¹ë¥  84.3%

**ê°œì„  ë°©ì•ˆ**:
```python
# filter_tf=12hì™€ ì¡°í•©
{
  "filter_tf": "12h",
  "entry_validity_hours": 48.0,  # 6h â†’ 48h
}

# ì˜ˆìƒ ì¶”ê°€ íš¨ê³¼:
# - ê±°ë˜ ë¹ˆë„: 0.5íšŒ/ì¼ â†’ 0.35íšŒ/ì¼ (-30%)
# - ìŠ¹ë¥ : 85% â†’ 87% (+2%, ê³¼ì í•© ì£¼ì˜)
```

**ì£¼ì˜ì‚¬í•­**:
- entry_validityë¥¼ ë„ˆë¬´ ëŠ˜ë¦¬ë©´ ê³¼ì í•© ìœ„í—˜
- Out-of-Sample ê²€ì¦ í•„ìˆ˜ (20% ë°ì´í„°)

#### 1.3 ì„±ê³µ ê¸°ì¤€ (Phase 1)

| ì§€í‘œ | í˜„ì¬ | ëª©í‘œ | ë‹¬ì„± ê¸°ì¤€ |
|------|------|------|----------|
| ê±°ë˜ ë¹ˆë„ | 1.74íšŒ/ì¼ | 0.5-1.0íšŒ/ì¼ | filter_tf=12h âœ… |
| ìŠ¹ë¥  | 79.46% | 82%+ | filter_tf=12h âœ… |
| MDD | 7.73% | 15% ì´í•˜ | ìœ ì§€ âœ… |

---

### Phase 2: ìŠ¹ë¥  í–¥ìƒ (Medium Priority)

**ê¸°ê°„**: 2-3ì£¼
**ëª©í‘œ**: 79.46% â†’ 85%+ (+5.54%)
**ë‚œì´ë„**: â­â­â­ (ì¤‘ê°„)

#### 2.1 ADX í•„í„° ì¶”ê°€ (í•µì‹¬)

**í˜„ì¬ ë¬¸ì œ**:
- enable_adx_filter=False (ë¹„í™œì„±)
- ë ˆì¸ì§€ ì‹œì¥ì—ì„œë„ ì§„ì… â†’ ìŠ¹ë¥  í•˜ë½

**ê°œì„  ë°©ì•ˆ**:
```python
# ADX í•„í„° í™œì„±í™”
{
  "enable_adx_filter": true,
  "adx_threshold": 25.0,  # ê¸°ë³¸ê°’ (ì¶”ì„¸ ê°•ë„ ì„ê³„ê°’)
  "adx_period": 14,
}

# ì˜ˆìƒ íš¨ê³¼:
# - ìŠ¹ë¥ : 82% â†’ 85% (+3%)
# - ê±°ë˜ ë¹ˆë„: 0.5íšŒ/ì¼ â†’ 0.4íšŒ/ì¼ (-20%)
# - MDD: 10% â†’ 8% (-20%)
```

**ADX ì„ê³„ê°’ ìµœì í™”**:
```python
# í…ŒìŠ¤íŠ¸ ë²”ìœ„: 20, 25, 30
adx_thresholds = [20.0, 25.0, 30.0]

# ì˜ˆìƒ ê²°ê³¼:
# adx_threshold=20: ìŠ¹ë¥  83%, ê±°ë˜ 0.45íšŒ/ì¼
# adx_threshold=25: ìŠ¹ë¥  85%, ê±°ë˜ 0.4íšŒ/ì¼ âœ… ëª©í‘œ
# adx_threshold=30: ìŠ¹ë¥  87%, ê±°ë˜ 0.3íšŒ/ì¼ (ë„ˆë¬´ ì ìŒ)
```

**ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸**:
```bash
python tools/test_adx_filter.py --threshold 20 25 30
```

#### 2.2 íŒ¨í„´ tolerance ì¡°ì • (ë³´ì¡°)

**í˜„ì¬ ë¬¸ì œ**:
- tolerance=0.12 (12%): ë‹¤ì†Œ ëŠìŠ¨
- ë¶€ì •í™•í•œ W/M íŒ¨í„´ í¬í•¨ ê°€ëŠ¥ì„±

**ê°œì„  ë°©ì•ˆ**:
```python
# tolerance ì¶•ì†Œ
{
  "pattern_tolerance": 0.10,  # 12% â†’ 10%
}

# ì˜ˆìƒ íš¨ê³¼:
# - ìŠ¹ë¥ : +0.5~1%
# - ê±°ë˜ ë¹ˆë„: -10%
```

**ì£¼ì˜ì‚¬í•­**:
- toleranceë¥¼ ë„ˆë¬´ ì¤„ì´ë©´ ìœ íš¨ íŒ¨í„´ë„ í•„í„°ë§
- 0.08 ì´í•˜ëŠ” ë¹„ê¶Œì¥

#### 2.3 2026-01-01 í”„ë¦¬ì…‹ ì¬ê²€ì¦

**í˜„ì¬ ë¬¸ì œ**:
- 2026-01-01 í”„ë¦¬ì…‹: ìŠ¹ë¥  **84.3%** (ë” ë†’ìŒ!)
- í•˜ì§€ë§Œ ìµœì‹  ìµœì í™”(2026-01-16)ì—ì„œëŠ” 79.46%

**ì°¨ì´ì  ë¶„ì„**:
| íŒŒë¼ë¯¸í„° | 2026-01-01 | 2026-01-16 | ì°¨ì´ |
|----------|------------|------------|------|
| atr_mult | 2.2 | 1.5 | -0.7 |
| trail_dist_r | 0.5 | 0.02 | **-0.48** (25ë°°!) |
| entry_validity | 48h | 6h | -42h |

**ì¬ê²€ì¦ ë°©ì•ˆ**:
```python
# 2026-01-01 íŒŒë¼ë¯¸í„°ë¡œ ì¬ë°±í…ŒìŠ¤íŠ¸
{
  "filter_tf": "4h",
  "atr_mult": 2.2,  # 1.5 â†’ 2.2
  "trail_dist_r": 0.5,  # 0.02 â†’ 0.5
  "entry_validity_hours": 48.0,  # 6 â†’ 48
}

# ì˜ˆìƒ ê²°ê³¼:
# - ìŠ¹ë¥ : 79.46% â†’ 84%+ (+4.5%)
# - MDD: 7.73% â†’ 9~10% (+20%, í—ˆìš©)
```

**ê²€ì¦ í•„ìš”**:
- ë°ì´í„° ê¸°ê°„ ì°¨ì´ í™•ì¸ (2026-01-01 vs 2026-01-16)
- Out-of-Sample í…ŒìŠ¤íŠ¸ (ê³¼ì í•© ë°©ì§€)

#### 2.4 ì„±ê³µ ê¸°ì¤€ (Phase 2)

| ì§€í‘œ | Phase 1 í›„ | ëª©í‘œ | ë‹¬ì„± ë°©ë²• |
|------|-----------|------|----------|
| ìŠ¹ë¥  | 82% | **85%+** | ADX í•„í„° âœ… |
| ê±°ë˜ ë¹ˆë„ | 0.5íšŒ/ì¼ | 0.4-0.5íšŒ/ì¼ | ADX í•„í„° ë¶€ì‘ìš© |
| MDD | 10% | 15% ì´í•˜ | ìœ ì§€ âœ… |

---

### Phase 3: ADX ì „ëµ ê°œì„  (Low Priority)

**ê¸°ê°„**: 3-4ì£¼
**ëª©í‘œ**: PF 0.00 â†’ 2.0+ (ì‹¤ìš© ê°€ëŠ¥)
**ë‚œì´ë„**: â­â­â­â­ (ì–´ë ¤ì›€)

#### 3.1 í˜„ì¬ ADX í”„ë¦¬ì…‹ ë¬¸ì œ ë¶„ì„

**í˜„ì¬ ìƒíƒœ** (`bybit_btcusdt_1h_adxdi.json`):
- ìŠ¹ë¥ : 78.81% (MACD ëŒ€ë¹„ -4.94%)
- MDD: 11.05% (MACDì™€ ìœ ì‚¬)
- **Profit Factor: 0.00** (ì¹˜ëª…ì  ë¬¸ì œ!)
- ê±°ë˜ ìˆ˜: 2,572íšŒ (MACD ëŒ€ë¹„ +16%)

**PF=0 ì›ì¸ ì¶”ì •**:
1. ì†ì‹¤ ê±°ë˜ ê¸ˆì•¡ì´ 0 ë˜ëŠ” ê·¹ì†Œ (ê³„ì‚° ì˜¤ë¥˜?)
2. ADX-DI ì‹ í˜¸ ë¡œì§ ë²„ê·¸ ê°€ëŠ¥ì„±
3. ë°±í…ŒìŠ¤íŠ¸ ì—”ì§„ í˜¸í™˜ì„± ë¬¸ì œ

#### 3.2 ADX ì „ëµ ê²€ì¦ ê³„íš

**Step 1: ì½”ë“œ ë ˆë²¨ ê²€ì¦**
```bash
# ADX ê³„ì‚° í•¨ìˆ˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
python -m pytest tests/test_indicators.py::test_calculate_adx -v

# ADX ì‹ í˜¸ ìƒì„± ë¡œì§ í™•ì¸
python tools/debug_adx_strategy.py
```

**Step 2: ìˆ˜ë™ ë°±í…ŒìŠ¤íŠ¸**
```python
# ì†Œê·œëª¨ ë°ì´í„°ë¡œ ìˆ˜ë™ ê²€ì¦
from core.strategy_core import AlphaX7Core

strategy = AlphaX7Core()
strategy.params['enable_adx_filter'] = True

# 100ê°œ ê±°ë˜ë§Œ ì¶”ì¶œ
signals = strategy.detect_all_signals(df[:1000])

# PF ìˆ˜ë™ ê³„ì‚°
wins = [s['pnl'] for s in signals if s['pnl'] > 0]
losses = [s['pnl'] for s in signals if s['pnl'] < 0]

profit_factor = sum(wins) / abs(sum(losses))
print(f"PF: {profit_factor}")
```

**Step 3: íŒŒë¼ë¯¸í„° ì¬ìµœì í™”**
```python
# ADX ì „ìš© ìµœì í™” ë²”ìœ„
ADX_OPTIMIZATION_RANGES = {
    'adx_period': [10, 12, 14, 16, 18, 21],
    'adx_threshold': [15, 20, 25, 30, 35],
    'atr_mult': [1.5, 2.0, 2.5, 3.0],
    'trail_start_r': [0.8, 1.0, 1.2, 1.5],
}

# Deep ëª¨ë“œë¡œ ì™„ì „ íƒìƒ‰ (~720ê°œ ì¡°í•©)
python tools/optimize_adx_strategy.py --mode deep
```

#### 3.3 ADX ì „ëµ ëŒ€ì•ˆ (ìµœí›„ ìˆ˜ë‹¨)

**ëŒ€ì•ˆ 1: MACD + ADX í•˜ì´ë¸Œë¦¬ë“œ**
```python
# MACDë¡œ ì‹ í˜¸ ìƒì„± + ADXë¡œ í•„í„°ë§
{
  "strategy": "macd",  # ê¸°ë³¸ ì „ëµ
  "enable_adx_filter": true,  # ADXëŠ” í•„í„°ë¡œë§Œ ì‚¬ìš©
  "adx_threshold": 25.0,
}

# ì˜ˆìƒ íš¨ê³¼:
# - MACD ìŠ¹ë¥  ìœ ì§€ (83%+)
# - ADX í•„í„°ë¡œ ë ˆì¸ì§€ ì œê±° â†’ ìŠ¹ë¥  +2~3%
```

**ëŒ€ì•ˆ 2: ADX ì „ëµ íê¸°**
```
- ADX ì „ëµì€ ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ìœ ì§€
- MACD ì „ëµì— ì§‘ì¤‘
- ADXëŠ” í•„í„°ë¡œë§Œ ì‚¬ìš©
```

#### 3.4 ì„±ê³µ ê¸°ì¤€ (Phase 3)

| ì§€í‘œ | í˜„ì¬ | ëª©í‘œ | ë‹¬ì„± ì—¬ë¶€ |
|------|------|------|----------|
| PF | 0.00 | 2.0+ | ì¬ìµœì í™” í•„ìš” |
| ìŠ¹ë¥  | 78.81% | 80%+ | +1.19% í•„ìš” |
| MDD | 11.05% | 15% ì´í•˜ | âœ… ë‹¬ì„± |

---

## ğŸ› ï¸ êµ¬í˜„ ê³„íš

### ì‘ì—… ìš°ì„ ìˆœìœ„

| Phase | ì‘ì—… | ì˜ˆìƒ ì‹œê°„ | ë‚œì´ë„ | ìš°ì„ ìˆœìœ„ |
|-------|------|----------|--------|---------|
| **Phase 1.1** | filter_tf ì¡°ì • (6h/12h) | 3ì‹œê°„ | â­â­ | â­â­â­â­â­ |
| **Phase 1.2** | entry_validity í™•ëŒ€ | 2ì‹œê°„ | â­ | â­â­â­â­ |
| **Phase 2.1** | ADX í•„í„° ì¶”ê°€ | 4ì‹œê°„ | â­â­â­ | â­â­â­â­ |
| **Phase 2.2** | tolerance ì¡°ì • | 1ì‹œê°„ | â­ | â­â­â­ |
| **Phase 2.3** | 2026-01-01 ì¬ê²€ì¦ | 3ì‹œê°„ | â­â­ | â­â­â­ |
| **Phase 3.1** | ADX ì½”ë“œ ê²€ì¦ | 6ì‹œê°„ | â­â­â­â­ | â­â­ |
| **Phase 3.2** | ADX ì¬ìµœì í™” | 8ì‹œê°„ | â­â­â­â­ | â­â­ |

### ì‘ì—… ìˆœì„œ (Gantt Chart)

```
Week 1-2: Phase 1 (ê±°ë˜ ë¹ˆë„ ìµœì í™”)
â”œâ”€ Day 1-2:   filter_tf=6h í…ŒìŠ¤íŠ¸ â†’ ë°±í…ŒìŠ¤íŠ¸ â†’ ë¶„ì„
â”œâ”€ Day 3-4:   filter_tf=12h í…ŒìŠ¤íŠ¸ â†’ ë°±í…ŒìŠ¤íŠ¸ â†’ ë¶„ì„
â”œâ”€ Day 5-7:   entry_validity ìµœì í™” â†’ ê²°ê³¼ ê²€ì¦
â””â”€ Day 8-14:  í”„ë¦¬ì…‹ ìƒì„± â†’ ë°ëª¨ ê³„ì¢Œ í…ŒìŠ¤íŠ¸ (ì„ íƒ)

Week 3-4: Phase 2 (ìŠ¹ë¥  í–¥ìƒ)
â”œâ”€ Day 15-17: ADX í•„í„° ì¶”ê°€ â†’ ë°±í…ŒìŠ¤íŠ¸
â”œâ”€ Day 18-19: tolerance ì¡°ì • â†’ ë°±í…ŒìŠ¤íŠ¸
â”œâ”€ Day 20-22: 2026-01-01 íŒŒë¼ë¯¸í„° ì¬ê²€ì¦
â”œâ”€ Day 23-25: Out-of-Sample í…ŒìŠ¤íŠ¸ (ê³¼ì í•© ë°©ì§€)
â””â”€ Day 26-28: ìµœì¢… í”„ë¦¬ì…‹ í™•ì • â†’ ë¬¸ì„œí™”

Week 5-8: Phase 3 (ADX ì „ëµ ê°œì„ ) - ì„ íƒ ì‚¬í•­
â”œâ”€ Day 29-32: ADX ì½”ë“œ ê²€ì¦ â†’ ë²„ê·¸ ìˆ˜ì •
â”œâ”€ Day 33-40: ADX íŒŒë¼ë¯¸í„° ì¬ìµœì í™” (Deep ëª¨ë“œ)
â”œâ”€ Day 41-48: ê²°ê³¼ ë¶„ì„ â†’ ì „ëµ ê°œì„  ë˜ëŠ” íê¸° ê²°ì •
â””â”€ Day 49-56: í•˜ì´ë¸Œë¦¬ë“œ ì „ëµ í…ŒìŠ¤íŠ¸ (MACD+ADX í•„í„°)
```

---

## ğŸ§ª ê²€ì¦ ê³„íš

### Out-of-Sample í…ŒìŠ¤íŠ¸ (í•„ìˆ˜)

```python
# ë°ì´í„° ë¶„í•  (80% í›ˆë ¨, 20% í…ŒìŠ¤íŠ¸)
split_date = '2024-09-01'  # 5.8ë…„ ë°ì´í„°ì˜ 80% ì§€ì 

# í›ˆë ¨ ë°ì´í„° (2020-03-25 ~ 2024-08-31)
train_df = df[df['timestamp'] < split_date]

# í…ŒìŠ¤íŠ¸ ë°ì´í„° (2024-09-01 ~ 2026-01-16)
test_df = df[df['timestamp'] >= split_date]

# Step 1: í›ˆë ¨ ë°ì´í„°ë¡œ ìµœì í™”
optimizer = BacktestOptimizer(df=train_df)
train_results = optimizer.grid_search(grid)

# Step 2: í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¡œ ê²€ì¦
test_results = optimizer._run_single(
    train_results[0].params,  # ìµœì  íŒŒë¼ë¯¸í„°
    df=test_df
)

# Step 3: ì„±ëŠ¥ ë¹„êµ
win_rate_diff = abs(train_results[0].win_rate - test_results.win_rate)

if win_rate_diff > 5.0:
    print("âš ï¸ ê³¼ì í•© ì˜ì‹¬ (ìŠ¹ë¥  ì°¨ì´ 5% ì´ìƒ)")
else:
    print("âœ… ê²€ì¦ í†µê³¼")
```

### ê³¼ì í•© ê¸°ì¤€

| ì§€í‘œ | í—ˆìš© ì°¨ì´ | íŒì • |
|------|----------|------|
| ìŠ¹ë¥  | â‰¤ 5% | í›ˆë ¨ 85%, í…ŒìŠ¤íŠ¸ 80% â†’ âœ… |
| MDD | â‰¤ 5% | í›ˆë ¨ 10%, í…ŒìŠ¤íŠ¸ 15% â†’ âœ… |
| PF | â‰¤ 1.0 | í›ˆë ¨ 5.0, í…ŒìŠ¤íŠ¸ 4.0 â†’ âœ… |

### Walk-Forward í…ŒìŠ¤íŠ¸ (ê¶Œì¥)

```python
# 1ë…„ ë‹¨ìœ„ë¡œ ì´ë™í•˜ë©° ê²€ì¦
for year in range(2021, 2026):
    train_end = f"{year}-12-31"
    test_start = f"{year+1}-01-01"
    test_end = f"{year+1}-12-31"

    # í›ˆë ¨: 1ë…„, í…ŒìŠ¤íŠ¸: ë‹¤ìŒ 1ë…„
    train_df = df[df['timestamp'] <= train_end]
    test_df = df[(df['timestamp'] >= test_start) &
                 (df['timestamp'] <= test_end)]

    # ìµœì í™” â†’ ê²€ì¦
    ...
```

---

## ğŸ“ ì‚°ì¶œë¬¼

### ìƒì„±ë  íŒŒì¼

**Phase 1**:
```
presets/
â”œâ”€â”€ bybit_btcusdt_filter_6h_20260116.json    (filter_tf=6h)
â”œâ”€â”€ bybit_btcusdt_filter_12h_20260116.json   (filter_tf=12h)
â””â”€â”€ bybit_btcusdt_optimized_v2.json          (ìµœì¢… ê¶Œì¥)

docs/
â””â”€â”€ WORK_LOG_20260116_PHASE1_FILTER_TF.txt
```

**Phase 2**:
```
presets/
â”œâ”€â”€ bybit_btcusdt_adx_filter_20260116.json   (ADX í•„í„° ì¶”ê°€)
â””â”€â”€ bybit_btcusdt_final_v2_20260116.json     (ìµœì¢… í™•ì •)

docs/
â””â”€â”€ WORK_LOG_20260116_PHASE2_WIN_RATE.txt
```

**Phase 3**:
```
presets/
â”œâ”€â”€ bybit_btcusdt_adx_v2_20260116.json       (ADX ì¬ìµœì í™”)
â””â”€â”€ bybit_btcusdt_hybrid_20260116.json       (MACD+ADX í•˜ì´ë¸Œë¦¬ë“œ)

docs/
â””â”€â”€ WORK_LOG_20260116_PHASE3_ADX_FIX.txt
```

---

## ğŸ¯ ìµœì¢… ëª©í‘œ ë‹¬ì„± ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ A: ë³´ìˆ˜ì  (filter_tf=12h)

```json
{
  "filter_tf": "12h",
  "entry_validity_hours": 48.0,
  "enable_adx_filter": true,
  "adx_threshold": 25.0,
  "atr_mult": 1.5,
  "trail_start_r": 1.0,
  "trail_dist_r": 0.02
}
```

**ì˜ˆìƒ ê²°ê³¼**:
- ìŠ¹ë¥ : **87%** (ëª©í‘œ 85% ì´ˆê³¼ âœ…)
- ê±°ë˜ ë¹ˆë„: **0.4íšŒ/ì¼** (ëª©í‘œ ë²”ìœ„ âœ…)
- MDD: **9%** (ëª©í‘œ 15% ì´í•˜ âœ…)
- PF: **5.5** (ìœ ì§€ âœ…)

### ì‹œë‚˜ë¦¬ì˜¤ B: ê· í˜• (filter_tf=6h)

```json
{
  "filter_tf": "6h",
  "entry_validity_hours": 24.0,
  "enable_adx_filter": true,
  "adx_threshold": 25.0,
  "atr_mult": 1.5,
  "trail_start_r": 1.0,
  "trail_dist_r": 0.02
}
```

**ì˜ˆìƒ ê²°ê³¼**:
- ìŠ¹ë¥ : **85%** (ëª©í‘œ ë‹¬ì„± âœ…)
- ê±°ë˜ ë¹ˆë„: **0.8íšŒ/ì¼** (ëª©í‘œ ë²”ìœ„ âœ…)
- MDD: **10%** (ëª©í‘œ 15% ì´í•˜ âœ…)
- PF: **5.0** (ìœ ì§€ âœ…)

### ì‹œë‚˜ë¦¬ì˜¤ C: 2026-01-01 ì¬í˜„ (ê²€ì¦ í›„)

```json
{
  "filter_tf": "4h",
  "entry_validity_hours": 48.0,
  "atr_mult": 2.2,
  "trail_start_r": 0.8,
  "trail_dist_r": 0.5,
  "enable_adx_filter": false
}
```

**ì˜ˆìƒ ê²°ê³¼** (ê²€ì¦ í•„ìš”):
- ìŠ¹ë¥ : **84%** (2026-01-01 ì¬í˜„)
- ê±°ë˜ ë¹ˆë„: **1.0íšŒ/ì¼** (ëª©í‘œ ë²”ìœ„ âœ…)
- MDD: **9%** (ëª©í‘œ 15% ì´í•˜ âœ…)
- PF: **5.0+** (ìœ ì§€ âœ…)

---

## âš ï¸ ë¦¬ìŠ¤í¬ ê´€ë¦¬

### ì£¼ìš” ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ê°€ëŠ¥ì„± | ì˜í–¥ | ì™„í™” ë°©ì•ˆ |
|--------|-------|------|----------|
| **ê³¼ì í•©** | ë†’ìŒ | ì‹¤ì „ ì„±ëŠ¥ ì €í•˜ | Out-of-Sample í•„ìˆ˜ |
| **ë°ì´í„° ê¸°ê°„ ì°¨ì´** | ì¤‘ê°„ | ê²°ê³¼ ë¶ˆì¼ì¹˜ | ë™ì¼ ê¸°ê°„ ì¬ê²€ì¦ |
| **ADX ì „ëµ ì‹¤íŒ¨** | ì¤‘ê°„ | Phase 3 íê¸° | í•˜ì´ë¸Œë¦¬ë“œ ëŒ€ì•ˆ |
| **ê±°ë˜ ë¹ˆë„ ê³¼ì†Œ** | ë‚®ìŒ | í†µê³„ ì‹ ë¢°ë„ ì €í•˜ | filter_tf ì¡°ì • |

### ì‹¤íŒ¨ ì‹œ ëŒ€ì•ˆ

**Plan A ì‹¤íŒ¨ ì‹œ** (filter_tf=12h â†’ ê±°ë˜ ë¹ˆë„ ê³¼ì†Œ):
â†’ filter_tf=6hë¡œ ì¡°ì •

**Plan B ì‹¤íŒ¨ ì‹œ** (ADX í•„í„° â†’ ìŠ¹ë¥  ê°œì„  ì—†ìŒ):
â†’ tolerance ì¡°ì • ë˜ëŠ” 2026-01-01 íŒŒë¼ë¯¸í„° ì‚¬ìš©

**Plan C ì‹¤íŒ¨ ì‹œ** (ADX ì „ëµ â†’ PF ì—¬ì „íˆ 0):
â†’ ADX ì „ëµ íê¸°, MACD ì „ëµì— ì§‘ì¤‘

---

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ (KPI)

### Phase 1 KPI (ê±°ë˜ ë¹ˆë„)

| ì§€í‘œ | í˜„ì¬ | ëª©í‘œ | ë‹¬ì„± ê¸°ì¤€ |
|------|------|------|----------|
| ê±°ë˜ ë¹ˆë„ | 1.74íšŒ/ì¼ | 0.5-1.0íšŒ/ì¼ | filter_tf=12h |
| ìŠ¹ë¥  | 79.46% | 80%+ | ìœ ì§€ ë˜ëŠ” í–¥ìƒ |
| MDD | 7.73% | 15% ì´í•˜ | ìœ ì§€ |

### Phase 2 KPI (ìŠ¹ë¥ )

| ì§€í‘œ | Phase 1 í›„ | ëª©í‘œ | ë‹¬ì„± ê¸°ì¤€ |
|------|-----------|------|----------|
| ìŠ¹ë¥  | ~82% | **85%+** | ADX í•„í„° |
| ê±°ë˜ ë¹ˆë„ | ~0.5íšŒ/ì¼ | 0.4-0.5íšŒ/ì¼ | ìœ ì§€ |
| MDD | ~10% | 15% ì´í•˜ | ìœ ì§€ |

### Phase 3 KPI (ADX)

| ì§€í‘œ | í˜„ì¬ | ëª©í‘œ | ë‹¬ì„± ê¸°ì¤€ |
|------|------|------|----------|
| PF | 0.00 | 2.0+ | ì¬ìµœì í™” |
| ìŠ¹ë¥  | 78.81% | 80%+ | +1.19% |
| MDD | 11.05% | 15% ì´í•˜ | ìœ ì§€ |

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„ (Immediate Actions)

### ì¦‰ì‹œ ì‹¤í–‰ (ì˜¤ëŠ˜)

1. **filter_tf=6h ë°±í…ŒìŠ¤íŠ¸** (~2ì‹œê°„)
   ```bash
   python tools/test_filter_tf_hypothesis.py --filter_tf 6h
   ```

2. **filter_tf=12h ë°±í…ŒìŠ¤íŠ¸** (~2ì‹œê°„)
   ```bash
   python tools/test_filter_tf_hypothesis.py --filter_tf 12h
   ```

3. **ê²°ê³¼ ë¹„êµ ë¶„ì„** (~1ì‹œê°„)
   - CSV íŒŒì¼ ë¹„êµ
   - ìŠ¹ë¥ , ê±°ë˜ ë¹ˆë„, MDD í™•ì¸

### ì´ë²ˆ ì£¼ (Week 1)

1. entry_validity ìµœì í™” (6h/12h/24h/48h)
2. ìµœì  ì¡°í•© ì„ ì • (filter_tf + entry_validity)
3. í”„ë¦¬ì…‹ ìƒì„± ë° ì €ì¥

### ë‹¤ìŒ ì£¼ (Week 2)

1. ADX í•„í„° ì¶”ê°€ í…ŒìŠ¤íŠ¸
2. Out-of-Sample ê²€ì¦
3. ìµœì¢… í”„ë¦¬ì…‹ í™•ì •

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê´€ë ¨ ë¬¸ì„œ
- [ì „ëµ ì „ì²´ ë¶„ì„ ê°€ì´ë“œ v3.0](ì „ëµ_ì „ì²´_ë¶„ì„_ê°€ì´ë“œ.md)
- [OPTIMIZATION_FINAL_SUMMARY_20260116.md](OPTIMIZATION_FINAL_SUMMARY_20260116.md)
- [WINNING_RATE_PARADOX.md](WINNING_RATE_PARADOX.md)
- [CONFIG_PRESETS_COMPARISON.md](CONFIG_PRESETS_COMPARISON.md)

### ê¸°ì¡´ ìµœì í™” ê²°ê³¼
- `config/presets/bybit_btcusdt_1h_macd.json` (2026-01-01, ìŠ¹ë¥  84.3%)
- `presets/bybit_btcusdt_final_20260116.json` (2026-01-16, ìŠ¹ë¥  79.46%)

### ë„êµ¬ ìŠ¤í¬ë¦½íŠ¸
- `tools/test_filter_tf_hypothesis.py` - filter_tf í…ŒìŠ¤íŠ¸
- `tools/test_adx_filter.py` - ADX í•„í„° í…ŒìŠ¤íŠ¸
- `tools/optimize_presets_comprehensive.py` - ì¢…í•© ìµœì í™”

---

**ì‘ì„±**: Claude Sonnet 4.5
**ë¬¸ì„œ ë²„ì „**: 1.0
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2026-01-16
**ì˜ˆìƒ ì™„ë£Œ ì‹œê°„**: Phase 1-2 (2-4ì£¼), Phase 3 (ì„ íƒ, 4-8ì£¼)
