<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TwinStar Quantum - ì°¨ì„¸ëŒ€ ì•Œê³ ë¦¬ì¦˜ ë§¤ë§¤ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --bg-card: #16161e;
            --border-color: #2a2a3a;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-red: #ef4444;
            --accent-yellow: #f59e0b;
            --accent-purple: #8b5cf6;
        }
        
        body { background: var(--bg-primary); color: var(--text-primary); }
        .card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 12px; }
        .btn-primary { background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple)); transition: all 0.3s ease; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4); }
        .btn-success { background: linear-gradient(135deg, var(--accent-green), #059669); }
        .btn-danger { background: linear-gradient(135deg, var(--accent-red), #dc2626); }
        .btn-warning { background: linear-gradient(135deg, var(--accent-yellow), #d97706); }
        .input-field { background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-primary); }
        .input-field:focus { border-color: var(--accent-blue); outline: none; }
        .tab-active { background: var(--accent-blue); color: white; }
        .tab-inactive { background: var(--bg-tertiary); color: var(--text-secondary); }
        .tab-inactive:hover { background: var(--bg-secondary); }
        .positive { color: var(--accent-green); }
        .negative { color: var(--accent-red); }
        
        .toast { position: fixed; top: 20px; right: 20px; z-index: 1000; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        
        .log-panel { max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px; }
        .log-success { color: #10b981; }
        .log-error { color: #ef4444; }
        .log-info { color: #3b82f6; }
        .log-warning { color: #f59e0b; }
    </style>
</head>
<body class="min-h-screen">
    <div id="app">
        <!-- Toast ì•Œë¦¼ -->
        <div v-if="toast.show" class="toast">
            <div class="px-6 py-4 rounded-lg shadow-lg" 
                 :class="toast.type === 'success' ? 'bg-green-600' : toast.type === 'error' ? 'bg-red-600' : 'bg-blue-600'">
                <div class="flex items-center gap-3">
                    <span class="text-xl">{{ toast.type === 'success' ? 'âœ…' : toast.type === 'error' ? 'âŒ' : 'â„¹ï¸' }}</span>
                    <span class="font-medium">{{ toast.message }}</span>
                </div>
            </div>
        </div>

        <!-- Header -->
        <header class="bg-[#12121a] border-b border-[#2a2a3a] px-6 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <h1 class="text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                        â­ TwinStar Quantum
                    </h1>
                    <span class="text-xs text-gray-500">v1.8.3 Web</span>
                </div>
                <div class="flex items-center gap-4">
                    <span class="px-3 py-1 rounded-full text-xs" 
                          :class="connected ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'">
                        {{ connected ? 'ğŸŸ¢ API ì—°ê²°ë¨' : 'ğŸ”´ ì—°ê²° ì•ˆë¨' }}
                    </span>
                    <span class="text-sm text-gray-400">{{ currentTime }}</span>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <nav class="bg-[#12121a] border-b border-[#2a2a3a] px-6 py-2">
            <div class="flex gap-2">
                <button v-for="tab in tabs" :key="tab.id"
                        @click="switchTab(tab.id)"
                        class="px-4 py-2 rounded-lg text-sm font-medium transition-all"
                        :class="activeTab === tab.id ? 'tab-active' : 'tab-inactive'">
                    {{ tab.icon }} {{ tab.name }}
                </button>
            </div>
        </nav>

        <!-- í…ŒìŠ¤íŠ¸ ë¡œê·¸ íŒ¨ë„ -->
        <div class="mx-6 mt-4 card p-4">
            <div class="flex items-center justify-between mb-2">
                <h4 class="font-semibold text-sm">ğŸ“‹ í…ŒìŠ¤íŠ¸ ë¡œê·¸</h4>
                <button @click="clearLogs" class="text-xs text-gray-400 hover:text-white">ë¡œê·¸ ì§€ìš°ê¸°</button>
            </div>
            <div class="log-panel bg-[#0a0a0f] p-3 rounded-lg">
                <div v-for="(log, idx) in logs" :key="idx" :class="'log-' + log.type">
                    [{{ log.time }}] {{ log.message }}
                </div>
                <div v-if="logs.length === 0" class="text-gray-500">í…ŒìŠ¤íŠ¸ ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="p-6">
            <!-- ==================== ë§¤ë§¤ íƒ­ ==================== -->
            <div v-show="activeTab === 'trading'" class="space-y-6">
                <div class="grid grid-cols-4 gap-4">
                    <div class="card p-4">
                        <div class="text-sm text-gray-400 mb-1">ì´ ìì‚°</div>
                        <div class="text-2xl font-bold">{{ formatCurrency(dashboard.balance.total) }}</div>
                    </div>
                    <div class="card p-4">
                        <div class="text-sm text-gray-400 mb-1">ê°€ìš© ì”ê³ </div>
                        <div class="text-2xl font-bold text-blue-400">{{ formatCurrency(dashboard.balance.available) }}</div>
                    </div>
                    <div class="card p-4">
                        <div class="text-sm text-gray-400 mb-1">ì¼ì¼ ìˆ˜ìµ</div>
                        <div class="text-2xl font-bold" :class="dashboard.pnl.daily >= 0 ? 'positive' : 'negative'">
                            {{ formatPnl(dashboard.pnl.daily) }}
                        </div>
                    </div>
                    <div class="card p-4">
                        <div class="text-sm text-gray-400 mb-1">ì›”ê°„ ìˆ˜ìµ</div>
                        <div class="text-2xl font-bold" :class="dashboard.pnl.monthly >= 0 ? 'positive' : 'negative'">
                            {{ formatPnl(dashboard.pnl.monthly) }}
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-6">
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š ë‹¨ì¼ ê±°ë˜</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ê±°ë˜ì†Œ</label>
                                <select v-model="trade.exchange" @change="onExchangeChange" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="ex in exchanges" :key="ex" :value="ex">{{ ex.toUpperCase() }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ì‹¬ë³¼</label>
                                <select v-model="trade.symbol" @change="onSymbolChange" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="sym in symbols" :key="sym" :value="sym">{{ sym }}</option>
                                </select>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="text-sm text-gray-400 block mb-1">ìˆ˜ëŸ‰ (USDT)</label>
                                    <input type="number" v-model="trade.amount" class="input-field w-full px-4 py-2 rounded-lg">
                                </div>
                                <div>
                                    <label class="text-sm text-gray-400 block mb-1">ë ˆë²„ë¦¬ì§€</label>
                                    <input type="number" v-model="trade.leverage" min="1" max="125" class="input-field w-full px-4 py-2 rounded-lg">
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <button @click="executeTrade('buy')" class="btn-success text-white py-3 rounded-lg font-semibold">
                                    ğŸ“ˆ ë¡± ì§„ì…
                                </button>
                                <button @click="executeTrade('sell')" class="btn-danger text-white py-3 rounded-lg font-semibold">
                                    ğŸ“‰ ìˆ ì§„ì…
                                </button>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <button @click="refreshBalance" class="btn-primary text-white py-2 rounded-lg text-sm">
                                    ğŸ”„ ì”ê³  ìƒˆë¡œê³ ì¹¨
                                </button>
                                <button @click="connectExchange" class="btn-warning text-white py-2 rounded-lg text-sm">
                                    ğŸ”— ê±°ë˜ì†Œ ì—°ê²°
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“‹ í™œì„± í¬ì§€ì…˜</h3>
                        <div v-if="positions.length === 0" class="text-center text-gray-500 py-8">
                            í™œì„± í¬ì§€ì…˜ì´ ì—†ìŠµë‹ˆë‹¤
                        </div>
                        <div v-else class="space-y-3">
                            <div v-for="pos in positions" :key="pos.id" class="bg-[#1a1a24] p-4 rounded-lg">
                                <div class="flex justify-between items-center">
                                    <span class="font-semibold">{{ pos.symbol }}</span>
                                    <span :class="pos.side === 'Long' ? 'positive' : 'negative'">{{ pos.side }}</span>
                                </div>
                                <div class="flex justify-between mt-2 text-sm">
                                    <span class="text-gray-400">ì§„ì…ê°€: ${{ pos.entry }}</span>
                                    <span :class="pos.pnl >= 0 ? 'positive' : 'negative'">{{ formatPnl(pos.pnl) }}</span>
                                </div>
                                <button @click="closePosition(pos.id)" class="mt-2 w-full btn-danger text-white py-1 rounded text-sm">
                                    í¬ì§€ì…˜ ì¢…ë£Œ
                                </button>
                            </div>
                        </div>
                        <button @click="addTestPosition" class="mt-4 w-full btn-primary text-white py-2 rounded-lg text-sm">
                            â• í…ŒìŠ¤íŠ¸ í¬ì§€ì…˜ ì¶”ê°€
                        </button>
                    </div>
                </div>
            </div>

            <!-- ==================== ë°±í…ŒìŠ¤íŠ¸ íƒ­ ==================== -->
            <div v-show="activeTab === 'backtest'" class="space-y-6">
                <div class="grid grid-cols-3 gap-6">
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ”¬ ë°±í…ŒìŠ¤íŠ¸ ì„¤ì •</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ì‹¬ë³¼</label>
                                <select v-model="backtest.symbol" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="sym in symbols" :key="sym" :value="sym">{{ sym }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">íƒ€ì„í”„ë ˆì„</label>
                                <select v-model="backtest.timeframe" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="tf in timeframes" :key="tf" :value="tf">{{ tf }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ì‹œì‘ì¼</label>
                                <input type="date" v-model="backtest.startDate" class="input-field w-full px-4 py-2 rounded-lg">
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ì¢…ë£Œì¼</label>
                                <input type="date" v-model="backtest.endDate" class="input-field w-full px-4 py-2 rounded-lg">
                            </div>
                            <button @click="runBacktest" :disabled="backtest.running" 
                                    class="btn-primary w-full text-white py-3 rounded-lg font-semibold disabled:opacity-50">
                                {{ backtest.running ? 'â³ ì‹¤í–‰ ì¤‘...' : 'ğŸš€ ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰' }}
                            </button>
                            <button @click="loadDefaultParams" class="btn-warning w-full text-white py-2 rounded-lg text-sm">
                                ğŸ“¥ ê¸°ë³¸ íŒŒë¼ë¯¸í„° ë¡œë“œ
                            </button>
                            <button @click="saveBacktestResult" :disabled="!backtestResult" 
                                    class="btn-success w-full text-white py-2 rounded-lg text-sm disabled:opacity-50">
                                ğŸ’¾ ê²°ê³¼ ì €ì¥
                            </button>
                        </div>
                    </div>

                    <div class="col-span-2 card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼</h3>
                        <div v-if="!backtestResult" class="text-center text-gray-500 py-16">
                            ë°±í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”
                        </div>
                        <div v-else>
                            <div class="grid grid-cols-3 gap-4 mb-6">
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">ì´ ìˆ˜ìµë¥ </div>
                                    <div class="text-2xl font-bold positive">+{{ backtestResult.total_return }}%</div>
                                </div>
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">ìŠ¹ë¥ </div>
                                    <div class="text-2xl font-bold text-blue-400">{{ backtestResult.win_rate }}%</div>
                                </div>
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">MDD</div>
                                    <div class="text-2xl font-bold negative">-{{ backtestResult.max_drawdown }}%</div>
                                </div>
                            </div>
                            <div class="grid grid-cols-3 gap-4">
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">ìƒ¤í”„ ë¹„ìœ¨</div>
                                    <div class="text-xl font-bold">{{ backtestResult.sharpe_ratio }}</div>
                                </div>
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">ê±°ë˜ íšŸìˆ˜</div>
                                    <div class="text-xl font-bold">{{ backtestResult.trade_count }}</div>
                                </div>
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">Profit Factor</div>
                                    <div class="text-xl font-bold">{{ backtestResult.profit_factor }}</div>
                                </div>
                            </div>
                            <button @click="clearBacktestResult" class="mt-4 btn-danger text-white py-2 px-4 rounded-lg text-sm">
                                ğŸ—‘ï¸ ê²°ê³¼ ì´ˆê¸°í™”
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== ìµœì í™” íƒ­ ==================== -->
            <div v-show="activeTab === 'optimization'" class="space-y-6">
                <div class="grid grid-cols-3 gap-6">
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ¯ ìµœì í™” ì„¤ì •</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ì‹¬ë³¼</label>
                                <select v-model="optimization.symbol" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="sym in symbols" :key="sym" :value="sym">{{ sym }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">íƒ€ì„í”„ë ˆì„</label>
                                <select v-model="optimization.timeframe" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="tf in timeframes" :key="tf" :value="tf">{{ tf }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">
                                    ìµœì í™” ëª¨ë“œ 
                                    <span v-if="userTier === 'ADMIN'" class="text-red-400 text-xs">[ADMIN]</span>
                                </label>
                                <select v-model="optimization.mode" class="input-field w-full px-4 py-2 rounded-lg"
                                        :disabled="userTier !== 'ADMIN'">
                                    <option value="single">ì‹±ê¸€ ìµœì í™”</option>
                                    <option v-if="userTier === 'ADMIN'" value="batch">ë°°ì¹˜ ìµœì í™”</option>
                                    <option v-if="userTier === 'ADMIN'" value="walk_forward">Walk-Forward</option>
                                </select>
                                <p v-if="userTier !== 'ADMIN'" class="text-xs text-gray-500 mt-1">
                                    * ADMIN ë“±ê¸‰ë§Œ ë‹¤ë¥¸ ëª¨ë“œ ì‚¬ìš© ê°€ëŠ¥
                                </p>
                            </div>
                            <!-- [NEW] ì „ëµ ì„ íƒ ì²´í¬ë°•ìŠ¤ -->
                            <div>
                                <label class="text-sm text-gray-400 block mb-2">ì „ëµ ì„ íƒ</label>
                                <div class="flex gap-4">
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" v-model="optimization.strategies.macd" 
                                               @change="validateStrategySelection"
                                               class="w-4 h-4 rounded border-gray-500 bg-gray-700 text-green-500 focus:ring-green-500">
                                        <span class="text-green-400 font-medium">ğŸ“Š MACD</span>
                                        <span class="text-xs text-gray-500">(íˆìŠ¤í† ê·¸ë¨ W/M)</span>
                                    </label>
                                    <label class="flex items-center gap-2 cursor-pointer">
                                        <input type="checkbox" v-model="optimization.strategies.adxdi"
                                               @change="validateStrategySelection"
                                               class="w-4 h-4 rounded border-gray-500 bg-gray-700 text-blue-500 focus:ring-blue-500">
                                        <span class="text-blue-400 font-medium">ğŸ“ˆ ADX/DI</span>
                                        <span class="text-xs text-gray-500">(+DI/-DI í¬ë¡œìŠ¤ì˜¤ë²„)</span>
                                    </label>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">* ìµœì†Œ 1ê°œ ì´ìƒ ì„ íƒ í•„ìš”</p>
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-400">ì§„í–‰ë¥ </span>
                                    <span>{{ optimization.progress }}%</span>
                                </div>
                                <div class="w-full bg-[#1a1a24] rounded-full h-2">
                                    <div class="bg-blue-500 h-2 rounded-full transition-all" 
                                         :style="{ width: optimization.progress + '%' }"></div>
                                </div>
                            </div>
                            <button @click="startOptimization" :disabled="optimization.running"
                                    class="btn-primary w-full text-white py-3 rounded-lg font-semibold disabled:opacity-50">
                                {{ optimization.running ? 'â³ ìµœì í™” ì¤‘...' : 'ğŸš€ ìµœì í™” ì‹œì‘' }}
                            </button>
                            <button @click="stopOptimization" :disabled="!optimization.running"
                                    class="btn-danger w-full text-white py-2 rounded-lg text-sm disabled:opacity-50">
                                â¹ï¸ ìµœì í™” ì¤‘ì§€
                            </button>
                            <button @click="applyOptimalParams" :disabled="!optimization.result"
                                    class="btn-success w-full text-white py-2 rounded-lg text-sm disabled:opacity-50">
                                âœ… ìµœì  íŒŒë¼ë¯¸í„° ì ìš©
                            </button>
                        </div>
                    </div>

                    <div class="col-span-2 card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š ìµœì í™” ê²°ê³¼</h3>
                        <div v-if="!optimization.result" class="text-center text-gray-500 py-16">
                            ìµœì í™”ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”
                        </div>
                        <div v-else class="space-y-4">
                            <!-- ê²°ê³¼ ìš”ì•½ -->
                            <div class="grid grid-cols-4 gap-4">
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">ìˆ˜ìµë¥ </div>
                                    <div class="text-2xl font-bold positive">+{{ optimization.result.return }}%</div>
                                </div>
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">ìŠ¹ë¥ </div>
                                    <div class="text-2xl font-bold text-blue-400">{{ optimization.result.win_rate }}%</div>
                                </div>
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">MDD</div>
                                    <div class="text-2xl font-bold negative">-{{ optimization.result.mdd || 8.5 }}%</div>
                                </div>
                                <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                    <div class="text-sm text-gray-400">ìƒ¤í”„ ë¹„ìœ¨</div>
                                    <div class="text-2xl font-bold">{{ optimization.result.sharpe }}</div>
                                </div>
                            </div>
                            
                            <!-- ìµœì  íŒŒë¼ë¯¸í„° -->
                            <div class="bg-[#1a1a24] p-4 rounded-lg">
                                <div class="text-sm text-gray-400 mb-3">ğŸ¯ ìµœì  íŒŒë¼ë¯¸í„° (í”„ë¦¬ì…‹ìœ¼ë¡œ ì €ì¥ë¨)</div>
                                <div class="grid grid-cols-4 gap-4">
                                    <div v-for="(value, key) in optimization.result.params" :key="key" 
                                         class="bg-[#0a0a0f] p-2 rounded text-center">
                                        <span class="text-gray-500 text-xs block">{{ key }}</span>
                                        <span class="font-semibold text-white">{{ value }}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Top 5 ê²°ê³¼ í…Œì´ë¸” -->
                            <div class="bg-[#1a1a24] p-4 rounded-lg">
                                <div class="text-sm text-gray-400 mb-3">ğŸ“‹ ìƒìœ„ 5ê°œ ê²°ê³¼</div>
                                <table class="w-full text-sm">
                                    <thead>
                                        <tr class="text-gray-500 text-left">
                                            <th class="py-2 px-2">#</th>
                                            <th class="py-2 px-2">ì „ëµ</th>
                                            <th class="py-2 px-2">ATR</th>
                                            <th class="py-2 px-2">ìŠ¹ë¥ </th>
                                            <th class="py-2 px-2">ìˆ˜ìµë¥ </th>
                                            <th class="py-2 px-2">MDD</th>
                                            <th class="py-2 px-2">ì ìš©</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr v-for="(r, idx) in optimization.topResults" :key="idx" class="border-t border-gray-700">
                                            <td class="py-2 px-2">{{ idx + 1 }}</td>
                                            <td class="py-2 px-2">
                                                <span :class="r.strategy === 'adxdi' ? 'text-blue-400' : 'text-green-400'">
                                                    {{ r.strategy === 'adxdi' ? 'ğŸ“ˆ ADX/DI' : 'ğŸ“Š MACD' }}
                                                </span>
                                            </td>
                                            <td class="py-2 px-2">{{ r.atr }}</td>
                                            <td class="py-2 px-2 text-blue-400">{{ r.win_rate }}%</td>
                                            <td class="py-2 px-2" :class="r.return >= 0 ? 'positive' : 'negative'">{{ r.return >= 0 ? '+' : '' }}{{ r.return }}%</td>
                                            <td class="py-2 px-2 negative">-{{ r.mdd }}%</td>
                                            <td class="py-2 px-2">
                                                <button @click="applyResultParams(r)" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-500">
                                                    ì ìš©
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- í”„ë¦¬ì…‹ ì €ì¥ ì •ë³´ -->
                            <div class="bg-green-500/10 border border-green-500/30 p-3 rounded-lg">
                                <span class="text-green-400 text-sm">
                                    ğŸ’¾ í”„ë¦¬ì…‹ ì €ì¥ ê²½ë¡œ: <code class="bg-[#0a0a0f] px-2 py-1 rounded">config/presets/bybit_{{ optimization.symbol }}_{{ optimization.timeframe }}.json</code>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== ì„¤ì • íƒ­ ==================== -->
            <div v-show="activeTab === 'settings'" class="space-y-6">
                <div class="grid grid-cols-2 gap-6">
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ”‘ API ì„¤ì •</h3>
                        <div class="space-y-4">
                            <div v-for="ex in exchanges" :key="ex" class="flex items-center justify-between p-3 bg-[#1a1a24] rounded-lg">
                                <span class="font-medium">{{ ex.toUpperCase() }}</span>
                                <div class="flex items-center gap-2">
                                    <span class="px-3 py-1 rounded-full text-xs"
                                          :class="settings.apiKeys[ex] ? 'bg-green-500/20 text-green-400' : 'bg-gray-500/20 text-gray-400'">
                                        {{ settings.apiKeys[ex] ? 'âœ… ì„¤ì •ë¨' : 'âšª ë¯¸ì„¤ì •' }}
                                    </span>
                                    <button @click="toggleApiKey(ex)" class="btn-primary text-white text-xs px-3 py-1 rounded">
                                        {{ settings.apiKeys[ex] ? 'í•´ì œ' : 'ì„¤ì •' }}
                                    </button>
                                </div>
                            </div>
                            <button @click="testAllConnections" class="btn-warning w-full text-white py-2 rounded-lg">
                                ğŸ”„ ëª¨ë“  ì—°ê²° í…ŒìŠ¤íŠ¸
                            </button>
                        </div>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“± í…”ë ˆê·¸ë¨ ì•Œë¦¼</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">Bot Token</label>
                                <input type="password" v-model="settings.telegram.token" 
                                       class="input-field w-full px-4 py-2 rounded-lg" placeholder="í† í° ì…ë ¥...">
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">Chat ID</label>
                                <input type="text" v-model="settings.telegram.chatId" 
                                       class="input-field w-full px-4 py-2 rounded-lg" placeholder="123456789">
                            </div>
                            <div class="flex items-center gap-2">
                                <input type="checkbox" v-model="settings.telegram.enabled" class="w-4 h-4" @change="toggleTelegram">
                                <label class="text-sm">ì•Œë¦¼ í™œì„±í™”</label>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <button @click="testTelegram" class="btn-primary text-white py-2 rounded-lg">
                                    ğŸ”” í…ŒìŠ¤íŠ¸ ì•Œë¦¼
                                </button>
                                <button @click="saveTelegramSettings" class="btn-success text-white py-2 rounded-lg">
                                    ğŸ’¾ ì €ì¥
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ¨ í…Œë§ˆ ì„¤ì •</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">í…Œë§ˆ</label>
                                <select v-model="settings.theme" @change="changeTheme" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option value="dark">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</option>
                                    <option value="light">â˜€ï¸ ë¼ì´íŠ¸ ëª¨ë“œ</option>
                                    <option value="premium">ğŸ’ í”„ë¦¬ë¯¸ì—„</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ì–¸ì–´</label>
                                <select v-model="settings.language" @change="changeLanguage" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">âš™ï¸ ì‹œìŠ¤í…œ</h3>
                        <div class="space-y-4">
                            <button @click="exportSettings" class="btn-primary w-full text-white py-2 rounded-lg">
                                ğŸ“¤ ì„¤ì • ë‚´ë³´ë‚´ê¸°
                            </button>
                            <button @click="importSettings" class="btn-warning w-full text-white py-2 rounded-lg">
                                ğŸ“¥ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
                            </button>
                            <button @click="resetSettings" class="btn-danger w-full text-white py-2 rounded-lg">
                                ğŸ”„ ì„¤ì • ì´ˆê¸°í™”
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- ========== ë¼ì´ì„ ìŠ¤ ê²€ì¦ (ADMIN ì „ìš©) ========== -->
                <div v-if="userTier === 'ADMIN'" class="card p-6 border-2 border-pink-500">
                    <h3 class="text-lg font-semibold mb-4 text-pink-400">ğŸ‘‘ ê´€ë¦¬ì ì „ìš© - ë¼ì´ì„ ìŠ¤ ê²€ì¦</h3>
                    <p class="text-gray-500 text-sm mb-4">ì‚¬ìš©ì ë¼ì´ì„ ìŠ¤ ì½”ë“œë¥¼ ê²€ì¦í•˜ê³  ë“±ê¸‰ì„ ë¶€ì—¬í•©ë‹ˆë‹¤.</p>
                    
                    <div class="flex gap-4 mb-4">
                        <input type="text" v-model="licenseVerify.code" 
                               class="input-field flex-1 px-4 py-3 rounded-lg border border-pink-500/50 font-mono"
                               placeholder="ê²€ì¦í•  ë¼ì´ì„ ìŠ¤ ì½”ë“œ ì…ë ¥...">
                        <select v-model="licenseVerify.tier" class="input-field px-4 py-3 rounded-lg min-w-[120px]">
                            <option value="TRIAL">TRIAL</option>
                            <option value="BASIC">BASIC</option>
                            <option value="STANDARD">STANDARD</option>
                            <option value="PREMIUM">PREMIUM</option>
                            <option value="ADMIN">ADMIN</option>
                        </select>
                        <button @click="verifyLicenseCode" 
                                class="px-6 py-3 rounded-lg font-semibold text-white"
                                style="background: linear-gradient(135deg, #e91e63, #9c27b0);">
                            ğŸ” ê²€ì¦ ë° ë“±ê¸‰ ë¶€ì—¬
                        </button>
                    </div>
                    
                    <div v-if="licenseVerify.result" 
                         class="p-4 rounded-lg"
                         :class="licenseVerify.result.success ? 'bg-green-500/10 border border-green-500/30' : 'bg-red-500/10 border border-red-500/30'">
                        <div :class="licenseVerify.result.success ? 'text-green-400' : 'text-red-400'">
                            {{ licenseVerify.result.success ? 'âœ… ê²€ì¦ ì„±ê³µ!' : 'âŒ ê²€ì¦ ì‹¤íŒ¨' }}
                        </div>
                        <div class="text-gray-400 text-sm mt-1">{{ licenseVerify.result.message }}</div>
                    </div>
                    
                    <p class="text-gray-600 text-xs mt-4 italic">
                        ğŸ’¡ ê²€ì¦ëœ ì½”ë“œëŠ” ì„œë²„ì— ê¸°ë¡ë˜ë©°, í•´ë‹¹ ì‚¬ìš©ìì—ê²Œ ë“±ê¸‰ì´ ìë™ ì ìš©ë©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>

            <!-- ==================== ê±°ë˜ ë‚´ì—­ íƒ­ ==================== -->
            <div v-show="activeTab === 'history'" class="space-y-6">
                <div class="card p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold">ğŸ“œ ê±°ë˜ ë‚´ì—­</h3>
                        <div class="flex gap-2">
                            <select v-model="historyFilter.exchange" @change="filterHistory" class="input-field px-3 py-1 rounded text-sm">
                                <option value="">ì „ì²´ ê±°ë˜ì†Œ</option>
                                <option v-for="ex in exchanges" :key="ex" :value="ex">{{ ex.toUpperCase() }}</option>
                            </select>
                            <select v-model="historyFilter.result" @change="filterHistory" class="input-field px-3 py-1 rounded text-sm">
                                <option value="">ì „ì²´ ê²°ê³¼</option>
                                <option value="profit">ìˆ˜ìµ</option>
                                <option value="loss">ì†ì‹¤</option>
                            </select>
                            <button @click="refreshHistory" class="btn-primary text-white px-4 py-1 rounded text-sm">
                                ğŸ”„ ìƒˆë¡œê³ ì¹¨
                            </button>
                            <button @click="exportHistory" class="btn-success text-white px-4 py-1 rounded text-sm">
                                ğŸ“¥ CSV ë‚´ë³´ë‚´ê¸°
                            </button>
                        </div>
                    </div>
                    <table class="w-full">
                        <thead>
                            <tr class="text-left text-gray-400 text-sm">
                                <th class="px-4 py-3 bg-[#1a1a24] rounded-tl-lg">ì¼ì‹œ</th>
                                <th class="px-4 py-3 bg-[#1a1a24]">ê±°ë˜ì†Œ</th>
                                <th class="px-4 py-3 bg-[#1a1a24]">ì‹¬ë³¼</th>
                                <th class="px-4 py-3 bg-[#1a1a24]">ë°©í–¥</th>
                                <th class="px-4 py-3 bg-[#1a1a24] text-right">ì†ìµ</th>
                                <th class="px-4 py-3 bg-[#1a1a24] text-right rounded-tr-lg">ìˆ˜ìµë¥ </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="trade in filteredHistory" :key="trade.id" class="border-b border-[#2a2a3a] hover:bg-[#1a1a24]">
                                <td class="px-4 py-3">{{ trade.datetime }}</td>
                                <td class="px-4 py-3">{{ trade.exchange }}</td>
                                <td class="px-4 py-3 font-medium">{{ trade.symbol }}</td>
                                <td class="px-4 py-3">
                                    <span :class="trade.side === 'Long' ? 'positive' : 'negative'">{{ trade.side }}</span>
                                </td>
                                <td class="px-4 py-3 text-right" :class="trade.pnl >= 0 ? 'positive' : 'negative'">
                                    {{ formatPnl(trade.pnl) }}
                                </td>
                                <td class="px-4 py-3 text-right" :class="trade.pnl_pct >= 0 ? 'positive' : 'negative'">
                                    {{ trade.pnl_pct >= 0 ? '+' : '' }}{{ trade.pnl_pct }}%
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="mt-4 flex justify-center gap-2">
                        <button @click="addTestTrade" class="btn-primary text-white px-4 py-2 rounded text-sm">
                            â• í…ŒìŠ¤íŠ¸ ê±°ë˜ ì¶”ê°€
                        </button>
                        <button @click="clearHistory" class="btn-danger text-white px-4 py-2 rounded text-sm">
                            ğŸ—‘ï¸ ë‚´ì—­ ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>
            </div>

            <!-- ==================== ë°ì´í„° ìˆ˜ì§‘ íƒ­ ==================== -->
            <div v-show="activeTab === 'data'" class="space-y-6">
                <div class="grid grid-cols-3 gap-6">
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“¥ ë°ì´í„° ë‹¤ìš´ë¡œë“œ</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ê±°ë˜ì†Œ</label>
                                <select v-model="dataCollection.exchange" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="ex in exchanges" :key="ex" :value="ex">{{ ex.toUpperCase() }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ì‹¬ë³¼</label>
                                <select v-model="dataCollection.symbol" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="sym in symbols" :key="sym" :value="sym">{{ sym }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">íƒ€ì„í”„ë ˆì„</label>
                                <select v-model="dataCollection.timeframe" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="tf in timeframes" :key="tf" :value="tf">{{ tf }}</option>
                                </select>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ê¸°ê°„ (ì¼)</label>
                                <input type="number" v-model="dataCollection.days" class="input-field w-full px-4 py-2 rounded-lg">
                            </div>
                            <div class="space-y-2">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-400">ì§„í–‰ë¥ </span>
                                    <span>{{ dataCollection.progress }}%</span>
                                </div>
                                <div class="w-full bg-[#1a1a24] rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full transition-all" 
                                         :style="{ width: dataCollection.progress + '%' }"></div>
                                </div>
                            </div>
                            <button @click="startDownload" :disabled="dataCollection.downloading"
                                    class="btn-primary w-full text-white py-3 rounded-lg font-semibold disabled:opacity-50">
                                {{ dataCollection.downloading ? 'â³ ë‹¤ìš´ë¡œë“œ ì¤‘...' : 'ğŸ“¥ ë‹¤ìš´ë¡œë“œ ì‹œì‘' }}
                            </button>
                            <button @click="stopDownload" :disabled="!dataCollection.downloading"
                                    class="btn-danger w-full text-white py-2 rounded-lg text-sm disabled:opacity-50">
                                â¹ï¸ ë‹¤ìš´ë¡œë“œ ì¤‘ì§€
                            </button>
                        </div>
                    </div>

                    <div class="col-span-2 card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š ì¸ê¸° ì‹¬ë³¼</h3>
                        <div class="grid grid-cols-5 gap-3">
                            <div v-for="sym in symbols" :key="sym" 
                                 @click="selectSymbolForDownload(sym)"
                                 class="bg-[#1a1a24] p-3 rounded-lg text-center cursor-pointer hover:bg-[#2a2a3a] transition-colors"
                                 :class="dataCollection.symbol === sym ? 'ring-2 ring-blue-500' : ''">
                                <div class="font-medium">{{ sym }}</div>
                            </div>
                        </div>
                        
                        <h4 class="text-md font-semibold mt-6 mb-3">ğŸ“ ë‹¤ìš´ë¡œë“œëœ ë°ì´í„°</h4>
                        <div class="space-y-2">
                            <div v-for="file in downloadedFiles" :key="file.name" 
                                 class="flex items-center justify-between bg-[#1a1a24] p-3 rounded-lg">
                                <span>{{ file.name }}</span>
                                <div class="flex gap-2">
                                    <span class="text-gray-400 text-sm">{{ file.size }}</span>
                                    <button @click="deleteFile(file.name)" class="text-red-400 hover:text-red-300 text-sm">ğŸ—‘ï¸</button>
                                </div>
                            </div>
                            <div v-if="downloadedFiles.length === 0" class="text-center text-gray-500 py-4">
                                ë‹¤ìš´ë¡œë“œëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ==================== ìë™ë§¤ë§¤ íƒ­ ==================== -->
            <div v-show="activeTab === 'auto'" class="space-y-6">
                <div class="grid grid-cols-3 gap-6">
                    <div class="card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ¤– ìë™ë§¤ë§¤ ì œì–´</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-[#1a1a24] rounded-lg">
                                <span>ìƒíƒœ</span>
                                <span :class="autoTrading.running ? 'positive' : 'text-gray-400'">
                                    {{ autoTrading.running ? 'ğŸŸ¢ ì‹¤í–‰ ì¤‘' : 'âšª ì¤‘ì§€ë¨' }}
                                </span>
                            </div>
                            <div>
                                <label class="text-sm text-gray-400 block mb-1">ê±°ë˜ì†Œ</label>
                                <select v-model="autoTrading.exchange" class="input-field w-full px-4 py-2 rounded-lg">
                                    <option v-for="ex in exchanges" :key="ex" :value="ex">{{ ex.toUpperCase() }}</option>
                                </select>
                            </div>
                            <!-- [NEW] ìê¸ˆ ê´€ë¦¬ ì„¹ì…˜ -->
                            <div class="bg-[#1a1a24] p-4 rounded-lg space-y-3">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-400">ğŸ’° ìê¸ˆ ê´€ë¦¬</span>
                                    <button @click="autoTrading.seedLocked = !autoTrading.seedLocked" 
                                            class="text-xl" :title="autoTrading.seedLocked ? 'ì ê¸ˆ í•´ì œ' : 'ì ê¸ˆ'">
                                        {{ autoTrading.seedLocked ? 'ğŸ”’' : 'ğŸ”“' }}
                                    </button>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="text-xs text-gray-500">ì´ˆê¸° ì‹œë“œ</label>
                                        <div class="flex items-center gap-2">
                                            <span class="text-gray-500">$</span>
                                            <input type="number" v-model="autoTrading.initialSeed" 
                                                   :disabled="autoTrading.seedLocked"
                                                   class="input-field w-full px-2 py-1 rounded text-sm"
                                                   :class="autoTrading.seedLocked ? 'opacity-50' : ''">
                                        </div>
                                    </div>
                                    <div>
                                        <label class="text-xs text-gray-500">í˜„ì¬ ì”ê³ </label>
                                        <div class="text-lg font-bold" :class="autoTrading.currentBalance >= autoTrading.initialSeed ? 'positive' : 'negative'">
                                            ${{ autoTrading.currentBalance.toFixed(2) }}
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="text-xs text-gray-500">ìˆ˜ìµë¥ :</span>
                                    <span class="font-bold" :class="(autoTrading.currentBalance - autoTrading.initialSeed) >= 0 ? 'positive' : 'negative'">
                                        {{ ((autoTrading.currentBalance - autoTrading.initialSeed) / autoTrading.initialSeed * 100).toFixed(2) }}%
                                    </span>
                                </div>
                                <div class="grid grid-cols-2 gap-3">
                                    <div>
                                        <label class="text-xs text-gray-500">ìë³¸ ëª¨ë“œ</label>
                                        <select v-model="autoTrading.capitalMode" class="input-field w-full px-2 py-1 rounded text-sm">
                                            <option value="compound">ğŸ“ˆ ë³µë¦¬</option>
                                            <option value="fixed">ğŸ“Š ê³ ì •</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="text-xs text-gray-500">ë ˆë²„ë¦¬ì§€</label>
                                        <input type="number" v-model="autoTrading.leverage" min="1" max="50"
                                               class="input-field w-full px-2 py-1 rounded text-sm">
                                    </div>
                                </div>
                            </div>
                            <!-- [NEW] ë‹¤ì¤‘ë§¤ë§¤ ì„¤ì • -->
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <label class="text-xs text-gray-500">ê°ì‹œ ëŒ€ìƒ</label>
                                    <input type="number" v-model="autoTrading.watchCount" min="10" max="100"
                                           class="input-field w-full px-2 py-1 rounded text-sm">
                                </div>
                                <div>
                                    <label class="text-xs text-gray-500">ë™ì‹œ í¬ì§€ì…˜</label>
                                    <input type="number" v-model="autoTrading.maxPositions" min="1" max="10"
                                           class="input-field w-full px-2 py-1 rounded text-sm">
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <button @click="startAutoTrading" :disabled="autoTrading.running"
                                        class="btn-success text-white py-3 rounded-lg font-semibold disabled:opacity-50">
                                    â–¶ï¸ ì‹œì‘
                                </button>
                                <button @click="stopAutoTrading" :disabled="!autoTrading.running"
                                        class="btn-danger text-white py-3 rounded-lg font-semibold disabled:opacity-50">
                                    â¹ï¸ ì¤‘ì§€
                                </button>
                            </div>
                            <button @click="restartAutoTrading" class="btn-warning w-full text-white py-2 rounded-lg text-sm">
                                ğŸ”„ ì¬ì‹œì‘
                            </button>
                        </div>
                    </div>

                    <div class="col-span-2 card p-6">
                        <h3 class="text-lg font-semibold mb-4">ğŸ“Š ì˜¤ëŠ˜ì˜ ì„±ê³¼</h3>
                        <div class="grid grid-cols-4 gap-4 mb-6">
                            <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                <div class="text-sm text-gray-400">ê±°ë˜ íšŸìˆ˜</div>
                                <div class="text-2xl font-bold">{{ autoTrading.tradesToday }}</div>
                            </div>
                            <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                <div class="text-sm text-gray-400">ìŠ¹ë¥ </div>
                                <div class="text-2xl font-bold text-blue-400">{{ autoTrading.winRate }}%</div>
                            </div>
                            <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                <div class="text-sm text-gray-400">ì˜¤ëŠ˜ ìˆ˜ìµ</div>
                                <div class="text-2xl font-bold" :class="autoTrading.pnlToday >= 0 ? 'positive' : 'negative'">
                                    {{ formatPnl(autoTrading.pnlToday) }}
                                </div>
                            </div>
                            <div class="bg-[#1a1a24] p-4 rounded-lg text-center">
                                <div class="text-sm text-gray-400">ì‹¤í–‰ ì‹œê°„</div>
                                <div class="text-2xl font-bold">{{ formatUptime(autoTrading.uptime) }}</div>
                            </div>
                        </div>
                        
                        <h4 class="text-md font-semibold mb-3">ğŸ“‹ ìµœê·¼ ì‹ í˜¸</h4>
                        <div class="space-y-2 max-h-48 overflow-y-auto">
                            <div v-for="signal in autoTrading.signals" :key="signal.id"
                                 class="flex items-center justify-between bg-[#1a1a24] p-3 rounded-lg">
                                <div>
                                    <span class="font-medium">{{ signal.symbol }}</span>
                                    <span class="ml-2" :class="signal.type === 'Long' ? 'positive' : 'negative'">{{ signal.type }}</span>
                                </div>
                                <span class="text-gray-400 text-sm">{{ signal.time }}</span>
                            </div>
                            <div v-if="autoTrading.signals.length === 0" class="text-center text-gray-500 py-4">
                                ì‹ í˜¸ê°€ ì—†ìŠµë‹ˆë‹¤
                            </div>
                        </div>
                        <button @click="addTestSignal" class="mt-4 btn-primary text-white px-4 py-2 rounded text-sm">
                            â• í…ŒìŠ¤íŠ¸ ì‹ í˜¸ ì¶”ê°€
                        </button>
                    </div>
                </div>
            </div>

            <!-- ==================== ë„ì›€ë§ íƒ­ ==================== -->
            <div v-show="activeTab === 'guide'" class="space-y-6">
                <!-- ë„ì›€ë§ ì„œë¸Œíƒ­ -->
                <div class="card p-4">
                    <div class="flex gap-2 flex-wrap">
                        <button v-for="sub in guideTabs" :key="sub.id"
                                @click="guideActiveTab = sub.id"
                                class="px-4 py-2 rounded-lg text-sm font-medium transition-all"
                                :class="guideActiveTab === sub.id ? 'bg-blue-500 text-white' : 'bg-[#1a1a24] text-gray-400 hover:bg-[#2a2a34]'">
                            {{ sub.icon }} {{ sub.name }}
                        </button>
                    </div>
                </div>

                <!-- ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ -->
                <div v-show="guideActiveTab === 'quickstart'" class="card p-6">
                    <h3 class="text-xl font-bold mb-6">ğŸš€ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ</h3>
                    <div class="space-y-4">
                        <div v-for="(step, idx) in guideData.quickStart" :key="idx"
                             class="flex items-start gap-4 bg-[#1a1a24] p-4 rounded-lg">
                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center font-bold text-lg">
                                {{ step.num }}
                            </div>
                            <div class="flex-1">
                                <div class="font-semibold text-lg">{{ step.icon }} {{ step.title }}</div>
                                <div class="text-gray-400 text-sm mt-1">{{ step.desc }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg">
                        <span class="text-yellow-400">ğŸ’¡</span> 
                        <span class="text-gray-300 text-sm">ì´ˆê¸° 1íšŒ ì„¤ì • í›„ì—ëŠ” 6ë²ˆ(ë§¤ë§¤ ì‹œì‘)ë§Œ ìˆ˜í–‰í•˜ë©´ ë©ë‹ˆë‹¤.</span>
                    </div>
                </div>

                <!-- ê° íƒ­ ê¸°ëŠ¥ -->
                <div v-show="guideActiveTab === 'tabs'" class="card p-6">
                    <h3 class="text-xl font-bold mb-6">ğŸ“‘ ê° íƒ­ ê¸°ëŠ¥</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div v-for="(tab, idx) in guideData.tabFeatures" :key="idx"
                             class="bg-[#1a1a24] p-4 rounded-lg">
                            <div class="font-semibold text-lg text-blue-400 mb-2">{{ tab.name }}</div>
                            <div class="text-gray-400 text-sm mb-3">{{ tab.desc }}</div>
                            <div class="space-y-1">
                                <div v-for="(feat, fidx) in tab.features" :key="fidx" class="text-xs text-gray-500">
                                    â€¢ {{ feat }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ê±°ë˜ì†Œë³„ ë§¤ë§¤ë²• -->
                <div v-show="guideActiveTab === 'trading'" class="space-y-6">
                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-4">ğŸ“ˆ ì„ ë¬¼ ë§¤ë§¤ë²• (Bybit/Binance)</h3>
                        <div class="grid grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-green-400 font-semibold mb-3">âœ… íŠ¹ì§•</h4>
                                <div class="space-y-2 text-sm text-gray-300">
                                    <div>â€¢ ë¡±/ìˆ ì–‘ë°©í–¥ ë§¤ë§¤</div>
                                    <div>â€¢ ë ˆë²„ë¦¬ì§€ ì‚¬ìš© ê°€ëŠ¥ (ê¸°ë³¸ 3x)</div>
                                    <div>â€¢ W íŒ¨í„´ â†’ ë¡± ì§„ì…</div>
                                    <div>â€¢ M íŒ¨í„´ â†’ ìˆ ì§„ì…</div>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-blue-400 font-semibold mb-3">ğŸ“Š ì „ëµ íŒŒë¼ë¯¸í„°</h4>
                                <div class="space-y-2 text-sm text-gray-300">
                                    <div>â€¢ ATR ë°°ìˆ˜: 1.5 (ì†ì ˆ)</div>
                                    <div>â€¢ íŠ¸ë ˆì¼ë§ ì‹œì‘: 1.0R</div>
                                    <div>â€¢ íŠ¸ë ˆì¼ë§ ê±°ë¦¬: 0.2R</div>
                                    <div>â€¢ RSI ê¸°ê°„: 21</div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-sm">
                            <span class="text-red-400">âš ï¸ ì£¼ì˜:</span> 
                            <span class="text-gray-300">ì²­ì‚°ê°€ í™•ì¸ í•„ìˆ˜ / ë†’ì€ ë ˆë²„ë¦¬ì§€ = ë†’ì€ ë¦¬ìŠ¤í¬</span>
                        </div>
                    </div>

                    <div class="card p-6">
                        <h3 class="text-xl font-bold mb-4">ğŸ“ˆ í˜„ë¬¼ ë§¤ë§¤ë²• (ì—…ë¹„íŠ¸/ë¹—ì¸)</h3>
                        <div class="grid grid-cols-2 gap-6">
                            <div>
                                <h4 class="text-green-400 font-semibold mb-3">âœ… íŠ¹ì§•</h4>
                                <div class="space-y-2 text-sm text-gray-300">
                                    <div>â€¢ ë¡±ë§Œ ê°€ëŠ¥ (ë§¤ìˆ˜ â†’ ë§¤ë„)</div>
                                    <div>â€¢ ë ˆë²„ë¦¬ì§€ ì—†ìŒ (1x)</div>
                                    <div>â€¢ W íŒ¨í„´ë§Œ ê°ì§€</div>
                                    <div>â€¢ ì²­ì‚° ìœ„í—˜ ì—†ìŒ</div>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-yellow-400 font-semibold mb-3">ğŸ’° ìê¸ˆ ê´€ë¦¬</h4>
                                <div class="space-y-2 text-sm text-gray-300">
                                    <div>â€¢ ë§¤ë§¤ë‹¹ ìë³¸ê¸ˆ ì§ì ‘ ì„¤ì •</div>
                                    <div>â€¢ ê¸°ë³¸ 100,000ì›</div>
                                    <div>â€¢ ë¶„ì‚° íˆ¬ì ê¶Œì¥</div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg text-sm">
                            <span class="text-yellow-400">âš ï¸ ì£¼ì˜:</span> 
                            <span class="text-gray-300">ì—…ë¹„íŠ¸: IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ í•„ìˆ˜! / ë¹—ì¸: ê³ ê°ì¸ì¦ ì™„ë£Œ í•„ìš”</span>
                        </div>
                    </div>
                </div>

                <!-- í…”ë ˆê·¸ë¨ ì„¤ì • -->
                <div v-show="guideActiveTab === 'telegram'" class="card p-6">
                    <h3 class="text-xl font-bold mb-6">ğŸ“± í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì„¤ì • ê°€ì´ë“œ</h3>
                    <div class="space-y-4">
                        <div v-for="(step, idx) in guideData.telegramSteps" :key="idx"
                             class="flex items-start gap-4 bg-[#1a1a24] p-4 rounded-lg">
                            <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center font-bold">
                                {{ step.num }}
                            </div>
                            <div class="flex-1">
                                <div class="font-semibold">{{ step.title }}</div>
                                <div class="text-gray-400 text-sm">{{ step.desc }}</div>
                                <div class="text-xs text-gray-500 mt-1 font-mono">{{ step.detail }}</div>
                            </div>
                        </div>
                    </div>
                    
                    <h4 class="text-lg font-semibold mt-6 mb-4">ğŸ”” ì•Œë¦¼ ì¢…ë¥˜</h4>
                    <div class="grid grid-cols-2 gap-3">
                        <div v-for="(notif, idx) in guideData.notificationTypes" :key="idx"
                             class="bg-[#1a1a24] p-3 rounded-lg">
                            <div class="flex items-center justify-between">
                                <span class="font-medium">{{ notif.label }}</span>
                                <span class="text-xs" :class="notif.default ? 'text-green-400' : 'text-gray-500'">
                                    {{ notif.default ? 'ê¸°ë³¸ ON' : 'ê¸°ë³¸ OFF' }}
                                </span>
                            </div>
                            <div class="text-xs text-gray-500 mt-1">{{ notif.desc }}</div>
                        </div>
                    </div>
                </div>

                <!-- ê±°ë˜ì†Œ ê°€ì… í˜œíƒ -->
                <div v-show="guideActiveTab === 'referral'" class="card p-6">
                    <h3 class="text-xl font-bold mb-6">ğŸ ê±°ë˜ì†Œ ê°€ì… í˜œíƒ</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div v-for="(ex, idx) in guideData.referrals" :key="idx"
                             class="bg-[#1a1a24] p-4 rounded-lg">
                            <div class="font-semibold text-lg text-blue-400 mb-2">{{ ex.name }}</div>
                            <div class="space-y-1 mb-3">
                                <div v-for="(benefit, bidx) in ex.benefits" :key="bidx" class="text-green-400 text-sm">
                                    âœ… {{ benefit }}
                                </div>
                            </div>
                            <div class="text-xs text-gray-500 whitespace-pre-line mb-3">{{ ex.guide }}</div>
                            <a v-if="ex.link" :href="ex.link" target="_blank" 
                               class="inline-block bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition-colors">
                                ğŸ”— {{ ex.name }} ê°€ì…í•˜ê¸°
                            </a>
                        </div>
                    </div>
                </div>

                <!-- FAQ -->
                <div v-show="guideActiveTab === 'faq'" class="card p-6">
                    <h3 class="text-xl font-bold mb-6">â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
                    <div class="space-y-4">
                        <div v-for="(item, idx) in guideData.faq" :key="idx"
                             class="bg-[#1a1a24] p-4 rounded-lg">
                            <div class="font-semibold text-blue-400 mb-2">Q. {{ item.q }}</div>
                            <div class="text-gray-300 text-sm">A. {{ item.a }}</div>
                        </div>
                    </div>
                </div>

                <!-- ì—ëŸ¬ í•´ê²° -->
                <div v-show="guideActiveTab === 'errors'" class="card p-6">
                    <h3 class="text-xl font-bold mb-6">âŒ ì£¼ìš” ì—ëŸ¬ í•´ê²°</h3>
                    <div class="space-y-4">
                        <div v-for="(item, idx) in guideData.errors" :key="idx"
                             class="bg-[#1a1a24] p-4 rounded-lg">
                            <div class="font-semibold text-red-400 mb-2">{{ item.error }}</div>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span class="text-gray-500">ì›ì¸:</span>
                                    <span class="text-gray-300 ml-2">{{ item.cause }}</span>
                                </div>
                                <div>
                                    <span class="text-gray-500">í•´ê²°:</span>
                                    <span class="text-green-400 ml-2">{{ item.solution }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì£¼ì˜ì‚¬í•­ -->
                <div v-show="guideActiveTab === 'warnings'" class="card p-6">
                    <h3 class="text-xl font-bold mb-6">âš ï¸ ì£¼ì˜ì‚¬í•­</h3>
                    <div class="space-y-3">
                        <div v-for="(warn, idx) in guideData.warnings" :key="idx"
                             class="flex items-center gap-3 bg-red-500/10 border border-red-500/30 p-4 rounded-lg">
                            <span class="text-red-400 text-xl">â—</span>
                            <span class="text-gray-300">{{ warn }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const { createApp, ref, reactive, computed, onMounted } = Vue;

        createApp({
            setup() {
                const API_URL = '/api';
                
                // State
                const connected = ref(false);
                const currentTime = ref('');
                const activeTab = ref('trading');
                const logs = ref([]);
                
                // ë„ì›€ë§ íƒ­ ìƒíƒœ
                const guideActiveTab = ref('quickstart');
                const guideTabs = [
                    { id: 'quickstart', name: 'ë¹ ë¥¸ ì‹œì‘', icon: 'ğŸš€' },
                    { id: 'tabs', name: 'íƒ­ ê¸°ëŠ¥', icon: 'ğŸ“‘' },
                    { id: 'trading', name: 'ë§¤ë§¤ë²•', icon: 'ğŸ“ˆ' },
                    { id: 'telegram', name: 'í…”ë ˆê·¸ë¨', icon: 'ğŸ“±' },
                    { id: 'referral', name: 'ê°€ì… í˜œíƒ', icon: 'ğŸ' },
                    { id: 'faq', name: 'FAQ', icon: 'â“' },
                    { id: 'errors', name: 'ì—ëŸ¬ í•´ê²°', icon: 'âŒ' },
                    { id: 'warnings', name: 'ì£¼ì˜ì‚¬í•­', icon: 'âš ï¸' },
                ];
                
                // ê°€ì´ë“œ ë°ì´í„°
                const guideData = reactive({
                    quickStart: [
                        { num: 1, title: 'API ì„¤ì •', desc: 'ì„¤ì • íƒ­ì—ì„œ ê±°ë˜ì†Œ API í‚¤ ë“±ë¡ ë° ì—°ê²° í…ŒìŠ¤íŠ¸', icon: 'ğŸ”‘' },
                        { num: 2, title: 'ë°ì´í„° ìˆ˜ì§‘', desc: 'ë°ì´í„° íƒ­ì—ì„œ ì›í•˜ëŠ” ì‹¬ë³¼/ê¸°ê°„ ë°ì´í„° ë‹¤ìš´ë¡œë“œ', icon: 'ğŸ“¥' },
                        { num: 3, title: 'ë°±í…ŒìŠ¤íŠ¸', desc: 'ë°±í…ŒìŠ¤íŠ¸ íƒ­ì—ì„œ ì „ëµ ì„±ê³¼ ê²€ì¦', icon: 'ğŸ“Š' },
                        { num: 4, title: 'íŒŒë¼ë¯¸í„° ìµœì í™”', desc: 'ìµœì í™” íƒ­ì—ì„œ ìµœì ì˜ íŒŒë¼ë¯¸í„° ìë™ íƒìƒ‰', icon: 'ğŸ¯' },
                        { num: 5, title: 'í”„ë¦¬ì…‹ ì ìš©', desc: 'ê²€ì¦ëœ ì„¤ì •ì„ í”„ë¦¬ì…‹ìœ¼ë¡œ ì €ì¥', icon: 'ğŸ’¾' },
                        { num: 6, title: 'ì‹¤ë§¤ë§¤ ì‹œì‘', desc: 'ìë™ë§¤ë§¤ íƒ­ì—ì„œ ë´‡ ì‹¤í–‰', icon: 'ğŸ¤–' },
                    ],
                    tabFeatures: [
                        { name: 'ğŸ“Š ë§¤ë§¤', desc: 'ì‹¤ì‹œê°„ ê±°ë˜ ì‹¤í–‰, í¬ì§€ì…˜ ê´€ë¦¬', features: ['ë‹¨ì¼ ê±°ë˜ (ë¡±/ìˆ)', 'í™œì„± í¬ì§€ì…˜ ëª¨ë‹ˆí„°ë§', 'ì”ê³  ìƒˆë¡œê³ ì¹¨'] },
                        { name: 'ğŸ”¬ ë°±í…ŒìŠ¤íŠ¸', desc: 'ê³¼ê±° ë°ì´í„°ë¡œ ì „ëµ ê²€ì¦', features: ['ê¸°ê°„ ì„¤ì •', 'ë ˆë²„ë¦¬ì§€ ì„¤ì •', 'ìˆ˜ìµë¥ /ìŠ¹ë¥ /MDD ë¶„ì„'] },
                        { name: 'ğŸ¯ ìµœì í™”', desc: 'ìµœì ì˜ íŒŒë¼ë¯¸í„° íƒìƒ‰', features: ['ë¹ ë¥¸/í‘œì¤€/ì‹¬ì¸µ ê²€ìƒ‰', 'MACD/ADX-DI ì „ëµ ì„ íƒ', 'í”„ë¦¬ì…‹ ìë™ ì €ì¥'] },
                        { name: 'âš™ï¸ ì„¤ì •', desc: 'API í‚¤, í…”ë ˆê·¸ë¨ ì„¤ì •', features: ['ê±°ë˜ì†Œ API ì—°ë™', 'í…”ë ˆê·¸ë¨ ì•Œë¦¼', 'ë‹¤í¬/ë¼ì´íŠ¸ í…Œë§ˆ'] },
                        { name: 'ğŸ“œ ê±°ë˜ë‚´ì—­', desc: 'ë§¤ë§¤ ê¸°ë¡ ì¡°íšŒ ë° ë¶„ì„', features: ['í•„í„°ë§ (ê¸°ê°„/ì‹¬ë³¼)', 'ì†ìµ í†µê³„', 'CSV ë‚´ë³´ë‚´ê¸°'] },
                        { name: 'ğŸ“¥ ë°ì´í„°', desc: 'ê³¼ê±° ìº”ë“¤ ë°ì´í„° ë‹¤ìš´ë¡œë“œ', features: ['ì‹¬ë³¼/ê¸°ê°„ ì„ íƒ', 'ë‹¤ìš´ë¡œë“œ ì§„í–‰ë¥ ', 'íŒŒì¼ ê´€ë¦¬'] },
                        { name: 'ğŸ¤– ìë™ë§¤ë§¤', desc: 'ë‹¤ì¤‘ ì½”ì¸ ìë™ ë§¤ë§¤ ë´‡', features: ['ë³µë¦¬/ê³ ì • ëª¨ë“œ', 'ê°ì‹œ ëŒ€ìƒ ì„¤ì •', 'ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§'] },
                    ],
                    telegramSteps: [
                        { num: 1, title: 'ë´‡ ìƒì„±', desc: 'í…”ë ˆê·¸ë¨ì—ì„œ @BotFather ê²€ìƒ‰', detail: '/newbot ì…ë ¥ â†’ ë´‡ ì´ë¦„ ì„¤ì •' },
                        { num: 2, title: 'Bot Token ë³µì‚¬', desc: 'ë´‡ ìƒì„± ì™„ë£Œ ì‹œ í‘œì‹œë˜ëŠ” í† í° ë³µì‚¬', detail: 'ì˜ˆ: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz' },
                        { num: 3, title: 'Chat ID í™•ì¸', desc: '@userinfobot ê²€ìƒ‰ â†’ /start ì…ë ¥', detail: 'í‘œì‹œë˜ëŠ” ìˆ«ìê°€ Chat ID (ì˜ˆ: 987654321)' },
                        { num: 4, title: 'ì„¤ì • ì…ë ¥', desc: 'ì„¤ì • íƒ­ì—ì„œ Bot Tokenê³¼ Chat ID ì…ë ¥', detail: 'í…ŒìŠ¤íŠ¸ ì „ì†¡ìœ¼ë¡œ ì—°ê²° í™•ì¸ í›„ ì €ì¥' },
                    ],
                    notificationTypes: [
                        { label: 'ğŸ’° ì§„ì…/ì²­ì‚°', desc: 'ë§¤ë§¤ ì§„ì… ë° ì²­ì‚° ì‹œ', default: true },
                        { label: 'ğŸ“Š ì‹ í˜¸ ê°ì§€', desc: 'W/M íŒ¨í„´ ì‹ í˜¸ ë°œìƒ ì‹œ', default: true },
                        { label: 'âš™ï¸ ì‹œìŠ¤í…œ', desc: 'ë´‡ ì‹œì‘/ì¤‘ì§€/ì—ëŸ¬ ì•Œë¦¼', default: true },
                        { label: 'ğŸ“ˆ ì¼ì¼ ìš”ì•½', desc: 'ë§¤ì¼ 23:59 ìˆ˜ìµ ìš”ì•½', default: false },
                    ],
                    referrals: [
                        { name: 'Bybit', benefits: ['ìˆ˜ìˆ˜ë£Œ 20% í‰ìƒ í• ì¸', 'ìµœëŒ€ $30,000 ë³´ë„ˆìŠ¤'], guide: '1. ë§í¬ë¡œ ê°€ì…\n2. KYC ì¸ì¦ ì™„ë£Œ\n3. ì²« ì…ê¸ˆ ì‹œ ë³´ë„ˆìŠ¤', link: 'https://www.bybit.com' },
                        { name: 'Binance', benefits: ['ìˆ˜ìˆ˜ë£Œ 10% í‰ìƒ í• ì¸', 'BNB ì¶”ê°€ í• ì¸'], guide: '1. ë§í¬ë¡œ ê°€ì…\n2. ì‹ ì› ì¸ì¦ ì™„ë£Œ\n3. BNB ë³´ìœ  ì‹œ ì¶”ê°€ í• ì¸', link: 'https://www.binance.com' },
                        { name: 'OKX', benefits: ['ìˆ˜ìˆ˜ë£Œ 20% í• ì¸', 'ë¯¸ìŠ¤í„°ë¦¬ ë°•ìŠ¤'], guide: '1. ë§í¬ë¡œ ê°€ì…\n2. ê±°ë˜ ì‹œì‘ ì‹œ ë¯¸ìŠ¤í„°ë¦¬ ë°•ìŠ¤', link: 'https://www.okx.com' },
                        { name: 'ì—…ë¹„íŠ¸', benefits: ['êµ­ë‚´ 1ìœ„ ê±°ë˜ì†Œ', 'ì›í™” ì…ì¶œê¸ˆ'], guide: '1. ì—…ë¹„íŠ¸ ì•± ì„¤ì¹˜\n2. ë³¸ì¸ì¸ì¦ ì™„ë£Œ\n3. ì€í–‰ ê³„ì¢Œ ì—°ë™', link: 'https://upbit.com' },
                    ],
                    faq: [
                        { q: 'ë¼ì´ì„ ìŠ¤ëŠ” ì–´ë–»ê²Œ êµ¬ë§¤í•˜ë‚˜ìš”?', a: 'ì•± ì‹¤í–‰ ì‹œ í‘œì‹œë˜ëŠ” USDT ì£¼ì†Œë¡œ $100 ì…ê¸ˆ í›„ "ìˆ˜ë™ í™œì„±í™”" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.' },
                        { q: 'ì—…ë¹„íŠ¸ì—ì„œ APIê°€ ì•ˆ ë˜ìš”.', a: 'ì—…ë¹„íŠ¸ëŠ” ê³ ì • IP ë“±ë¡ì´ í•„ìˆ˜ì…ë‹ˆë‹¤. VPSë‚˜ ê³ ì • IP ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì„¸ìš”.' },
                        { q: 'ë´‡ì´ ë§¤ë§¤ë¥¼ ì•ˆ í•´ìš”.', a: 'íŒ¨í„´ì´ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ ëŒ€ê¸°í•©ë‹ˆë‹¤. W/M íŒ¨í„´ì€ ìì£¼ ë°œìƒí•˜ì§€ ì•Šìœ¼ë‹ˆ ì¸ë‚´ì‹¬ì„ ê°€ì§€ì„¸ìš”.' },
                        { q: 'ì†ì ˆì´ ë„ˆë¬´ ë¹¨ë¼ìš”.', a: 'ATR ë°°ìˆ˜ë¥¼ ì¡°ì •í•˜ì„¸ìš”. ê¸°ë³¸ 1.5ì—ì„œ 2.0ìœ¼ë¡œ ëŠ˜ë¦¬ë©´ ì—¬ìœ ê°€ ìƒê¹ë‹ˆë‹¤.' },
                        { q: 'í…ŒìŠ¤íŠ¸ë„·ìœ¼ë¡œ ë¨¼ì € í•´ë³´ê³  ì‹¶ì–´ìš”.', a: 'Bybit/BinanceëŠ” Testnet ì§€ì›í•©ë‹ˆë‹¤. ì„¤ì •ì—ì„œ "Testnet Mode" ì²´í¬í•˜ì„¸ìš”.' },
                        { q: 'ì—¬ëŸ¬ ì½”ì¸ì„ ë™ì‹œì— ê±°ë˜í•  ìˆ˜ ìˆë‚˜ìš”?', a: 'ìë™ë§¤ë§¤ íƒ­ì—ì„œ ê°ì‹œ ëŒ€ìƒ ìˆ˜ë¥¼ ì„¤ì •í•˜ë©´ ë‹¤ì¤‘ ì½”ì¸ ë§¤ë§¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.' },
                    ],
                    errors: [
                        { error: 'Insufficient Balance', cause: 'ê³„ì¢Œì— ì”ê³  ë¶€ì¡±', solution: 'ê±°ë˜ì†Œì— ìê¸ˆ ì…ê¸ˆ í›„ ì¬ì‹œë„' },
                        { error: 'Invalid Signature', cause: 'API í‚¤ ë˜ëŠ” ì‹œí¬ë¦¿ ë¶€ì •í™•', solution: 'API í‚¤ ì¬í™•ì¸ ë° ì¬ì…ë ¥' },
                        { error: 'Connectivity Error', cause: 'ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” ì„œë²„ ë¶ˆì•ˆì •', solution: 'ë„¤íŠ¸ì›Œí¬ í™•ì¸ í›„ ì¬ì‹œë„' },
                        { error: 'Rate Limit Exceeded', cause: 'API í˜¸ì¶œ íšŸìˆ˜ ì´ˆê³¼', solution: 'ì ì‹œ ëŒ€ê¸° í›„ ì¬ì‹œë„ (1ë¶„)' },
                    ],
                    warnings: [
                        'ë°˜ë“œì‹œ Testnetì—ì„œ ë¨¼ì € í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”!',
                        'íˆ¬ì ê¸ˆì•¡ì€ ìƒì–´ë„ ë˜ëŠ” ê¸ˆì•¡ë§Œ ì‚¬ìš©í•˜ì„¸ìš”!',
                        'API í‚¤ ê¶Œí•œì€ ìµœì†Œí•œìœ¼ë¡œ ì„¤ì • (ì¶œê¸ˆ ë¹„í™œì„±í™”)',
                        '24ì‹œê°„ ë´‡ ìš´ì˜ ì‹œ ì„œë²„ ì‚¬ìš©ì„ ê¶Œì¥í•©ë‹ˆë‹¤',
                        'ê³¼ê±° ì„±ê³¼ê°€ ë¯¸ë˜ ìˆ˜ìµì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤',
                    ],
                });
                
                // ì‚¬ìš©ì ë“±ê¸‰ (ADMINì´ë©´ ë¼ì´ì„ ìŠ¤ ê²€ì¦ UI í‘œì‹œ)
                const userTier = ref('ADMIN');  // í…ŒìŠ¤íŠ¸ìš©: 'ADMIN' / ì‹¤ì œ: APIì—ì„œ ì¡°íšŒ
                
                // ë¼ì´ì„ ìŠ¤ ê²€ì¦ (ADMIN ì „ìš©)
                const licenseVerify = reactive({
                    code: '',
                    tier: 'BASIC',
                    result: null
                });
                
                const tabs = [
                    { id: 'trading', name: 'ë§¤ë§¤', icon: 'ğŸ“Š' },
                    { id: 'backtest', name: 'ë°±í…ŒìŠ¤íŠ¸', icon: 'ğŸ”¬' },
                    { id: 'optimization', name: 'ìµœì í™”', icon: 'ğŸ¯' },
                    { id: 'settings', name: 'ì„¤ì •', icon: 'âš™ï¸' },
                    { id: 'history', name: 'ê±°ë˜ ë‚´ì—­', icon: 'ğŸ“œ' },
                    { id: 'data', name: 'ë°ì´í„° ìˆ˜ì§‘', icon: 'ğŸ“¥' },
                    { id: 'auto', name: 'ìë™ë§¤ë§¤', icon: 'ğŸ¤–' },
                    { id: 'guide', name: 'ë„ì›€ë§', icon: 'ğŸ“š' },
                ];
                
                const exchanges = ref(['bybit', 'binance', 'okx', 'bitget', 'bingx', 'upbit', 'bithumb']);
                const symbols = ref(['BTCUSDT', 'ETHUSDT', 'SOLUSDT', 'XRPUSDT', 'DOGEUSDT', 
                                   'ADAUSDT', 'AVAXUSDT', 'DOTUSDT', 'LINKUSDT', 'MATICUSDT']);
                const timeframes = ref(['1m', '5m', '15m', '1h', '4h', '1d', '1w']);
                const positions = ref([]);
                const tradeHistory = ref([]);
                const downloadedFiles = ref([]);
                
                const toast = reactive({ show: false, message: '', type: 'info' });
                
                const dashboard = reactive({
                    balance: { total: 10000, available: 8500, in_position: 1500 },
                    pnl: { daily: 125.50, weekly: 450.00, monthly: 1200.00 }
                });
                
                const trade = reactive({ exchange: 'bybit', symbol: 'BTCUSDT', amount: 100, leverage: 10 });
                const backtest = reactive({ symbol: 'BTCUSDT', timeframe: '1h', startDate: '2025-01-01', endDate: '2026-01-01', running: false });
                const backtestResult = ref(null);
                
                const optimization = reactive({ 
                    symbol: 'BTCUSDT', timeframe: '1h', mode: 'single', running: false, progress: 0, result: null,
                    topResults: [],  // ìƒìœ„ 5ê°œ ê²°ê³¼
                    // [NEW] ì „ëµ ì„ íƒ
                    strategies: {
                        macd: true,    // MACD íˆìŠ¤í† ê·¸ë¨ W/M íŒ¨í„´
                        adxdi: false   // ADX/DI í¬ë¡œìŠ¤ì˜¤ë²„ W/M íŒ¨í„´
                    }
                });
                const settings = reactive({
                    telegram: { enabled: false, token: '', chatId: '' },
                    apiKeys: { bybit: false, binance: false, okx: false, bitget: false, bingx: false, upbit: false, bithumb: false },
                    theme: 'dark', language: 'ko'
                });
                
                const historyFilter = reactive({ exchange: '', result: '' });
                const dataCollection = reactive({ exchange: 'bybit', symbol: 'BTCUSDT', timeframe: '1h', days: 30, downloading: false, progress: 0 });
                const autoTrading = reactive({
                    running: false, uptime: 0, tradesToday: 0, pnlToday: 0, winRate: 0,
                    exchange: 'bybit', symbol: 'BTCUSDT', signals: [],
                    // [NEW] ìê¸ˆ ê´€ë¦¬
                    capitalMode: 'compound',  // compound | fixed
                    initialSeed: 100,
                    currentBalance: 100,
                    seedLocked: true,
                    watchCount: 50,
                    maxPositions: 1,
                    leverage: 10
                });
                
                // Helper functions
                const formatCurrency = (val) => '$' + val.toLocaleString('en-US', { minimumFractionDigits: 2 });
                const formatPnl = (val) => (val >= 0 ? '+$' : '-$') + Math.abs(val).toFixed(2);
                const formatUptime = (sec) => { const h = Math.floor(sec / 3600); const m = Math.floor((sec % 3600) / 60); return `${h}h ${m}m`; };
                
                const showToast = (message, type = 'info') => {
                    toast.show = true; toast.message = message; toast.type = type;
                    setTimeout(() => { toast.show = false; }, 3000);
                };
                
                const addLog = (message, type = 'info') => {
                    const time = new Date().toLocaleTimeString('ko-KR');
                    logs.value.unshift({ time, message, type });
                    if (logs.value.length > 50) logs.value.pop();
                };
                
                const clearLogs = () => { logs.value = []; addLog('ë¡œê·¸ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'info'); };
                
                const switchTab = (tabId) => {
                    activeTab.value = tabId;
                    addLog(`${tabs.find(t => t.id === tabId).icon} ${tabs.find(t => t.id === tabId).name} íƒ­ìœ¼ë¡œ ì „í™˜`, 'info');
                };
                
                // ========== ë§¤ë§¤ íƒ­ ê¸°ëŠ¥ ==========
                const onExchangeChange = () => addLog(`ê±°ë˜ì†Œ ë³€ê²½: ${trade.exchange.toUpperCase()}`, 'info');
                const onSymbolChange = () => addLog(`ì‹¬ë³¼ ë³€ê²½: ${trade.symbol}`, 'info');
                
                const executeTrade = async (side) => {
                    const sideKor = side === 'buy' ? 'ë¡±' : 'ìˆ';
                    addLog(`${sideKor} ì£¼ë¬¸ ì‹¤í–‰ ì¤‘... (${trade.symbol}, ${trade.amount} USDT, ${trade.leverage}x)`, 'info');
                    try {
                        const res = await fetch(`${API_URL}/trade`, {
                            method: 'POST', headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ ...trade, side })
                        });
                        if (res.ok) {
                            const data = await res.json();
                            addLog(`âœ… ${sideKor} ì£¼ë¬¸ ì„±ê³µ! Order ID: ${data.order_id}`, 'success');
                            showToast(`${sideKor} ì£¼ë¬¸ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤!`, 'success');
                        }
                    } catch (e) {
                        addLog(`âŒ ì£¼ë¬¸ ì‹¤íŒ¨: ${e.message}`, 'error');
                        showToast('ì£¼ë¬¸ ì‹¤í–‰ ì‹¤íŒ¨', 'error');
                    }
                };
                
                const refreshBalance = async () => {
                    addLog('ì”ê³  ìƒˆë¡œê³ ì¹¨ ì¤‘...', 'info');
                    try {
                        const res = await fetch(`${API_URL}/dashboard/status`);
                        if (res.ok) {
                            const data = await res.json();
                            Object.assign(dashboard, data);
                            addLog(`âœ… ì”ê³  ì—…ë°ì´íŠ¸: $${data.balance.total.toLocaleString()}`, 'success');
                            showToast('ì”ê³ ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                        }
                    } catch (e) { addLog(`âŒ ì”ê³  ì¡°íšŒ ì‹¤íŒ¨: ${e.message}`, 'error'); }
                };
                
                const connectExchange = () => {
                    addLog(`${trade.exchange.toUpperCase()} ê±°ë˜ì†Œ ì—°ê²° ì‹œë„...`, 'info');
                    setTimeout(() => {
                        addLog(`âœ… ${trade.exchange.toUpperCase()} ì—°ê²° ì„±ê³µ!`, 'success');
                        showToast(`${trade.exchange.toUpperCase()} ì—°ê²°ë¨`, 'success');
                    }, 1000);
                };
                
                const addTestPosition = () => {
                    const pos = {
                        id: Date.now(), symbol: trade.symbol, side: Math.random() > 0.5 ? 'Long' : 'Short',
                        entry: (Math.random() * 50000 + 30000).toFixed(2), pnl: (Math.random() * 200 - 100).toFixed(2)
                    };
                    positions.value.push(pos);
                    addLog(`â• í…ŒìŠ¤íŠ¸ í¬ì§€ì…˜ ì¶”ê°€: ${pos.symbol} ${pos.side}`, 'info');
                };
                
                const closePosition = (id) => {
                    const pos = positions.value.find(p => p.id === id);
                    positions.value = positions.value.filter(p => p.id !== id);
                    addLog(`ğŸ”´ í¬ì§€ì…˜ ì¢…ë£Œ: ${pos.symbol} (PnL: $${pos.pnl})`, 'warning');
                    showToast('í¬ì§€ì…˜ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                };
                
                // ========== ë°±í…ŒìŠ¤íŠ¸ íƒ­ ê¸°ëŠ¥ ==========
                const runBacktest = async () => {
                    backtest.running = true;
                    addLog(`ë°±í…ŒìŠ¤íŠ¸ ì‹œì‘: ${backtest.symbol} ${backtest.timeframe} (${backtest.startDate} ~ ${backtest.endDate})`, 'info');
                    try {
                        const res = await fetch(`${API_URL}/backtest`, {
                            method: 'POST', headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ symbol: backtest.symbol, timeframe: backtest.timeframe, start_date: backtest.startDate, end_date: backtest.endDate })
                        });
                        if (res.ok) {
                            const data = await res.json();
                            backtestResult.value = data.results;
                            addLog(`âœ… ë°±í…ŒìŠ¤íŠ¸ ì™„ë£Œ! ìˆ˜ìµë¥ : +${data.results.total_return}%, ìŠ¹ë¥ : ${data.results.win_rate}%`, 'success');
                            showToast('ë°±í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                        }
                    } catch (e) { addLog(`âŒ ë°±í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${e.message}`, 'error'); }
                    backtest.running = false;
                };
                
                const loadDefaultParams = () => {
                    addLog('ê¸°ë³¸ íŒŒë¼ë¯¸í„° ë¡œë“œ ì¤‘...', 'info');
                    setTimeout(() => { addLog('âœ… ê¸°ë³¸ íŒŒë¼ë¯¸í„°ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤ (MACD: 6/18/7, ATR: 14, RSI: 14)', 'success'); showToast('íŒŒë¼ë¯¸í„° ë¡œë“œ ì™„ë£Œ', 'success'); }, 500);
                };
                
                const saveBacktestResult = () => {
                    addLog('ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì €ì¥ ì¤‘...', 'info');
                    setTimeout(() => { addLog('âœ… ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: backtest_result_' + new Date().toISOString().slice(0,10) + '.json', 'success'); showToast('ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success'); }, 500);
                };
                
                const clearBacktestResult = () => { backtestResult.value = null; addLog('ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'info'); };
                
                // ========== ìµœì í™” íƒ­ ê¸°ëŠ¥ ==========
                
                // [NEW] ì „ëµ ì„ íƒ ê²€ì¦ í•¨ìˆ˜
                const validateStrategySelection = () => {
                    const { macd, adxdi } = optimization.strategies;
                    // ë‘˜ ë‹¤ í•´ì œí•˜ë ¤ í•˜ë©´ í•˜ë‚˜ ìœ ì§€
                    if (!macd && !adxdi) {
                        // ë‘˜ ë‹¤ falseë©´ MACD ê°•ì œ ì„ íƒ
                        optimization.strategies.macd = true;
                        showToast('ìµœì†Œ 1ê°œ ì „ëµì„ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤', 'warning');
                    }
                };
                
                // [NEW] ì„ íƒëœ ì „ëµ ëª©ë¡ ë°˜í™˜
                const getSelectedStrategies = () => {
                    const strategies = [];
                    if (optimization.strategies.macd) strategies.push('macd');
                    if (optimization.strategies.adxdi) strategies.push('adxdi');
                    return strategies;
                };
                
                const startOptimization = () => {
                    // [NEW] ì „ëµ ì„ íƒ ê²€ì¦
                    const selectedStrategies = getSelectedStrategies();
                    if (selectedStrategies.length === 0) {
                        showToast('ìµœì†Œ 1ê°œ ì „ëµì„ ì„ íƒí•´ì£¼ì„¸ìš”', 'error');
                        return;
                    }
                    
                    optimization.running = true; optimization.progress = 0;
                    optimization.result = null;
                    optimization.topResults = [];
                    
                    // [NEW] ì „ëµ ì •ë³´ ë¡œê·¸ì— í¬í•¨
                    const strategyNames = selectedStrategies.map(s => s === 'macd' ? 'MACD' : 'ADX/DI').join(' + ');
                    addLog(`ìµœì í™” ì‹œì‘: ${optimization.symbol} ${optimization.timeframe} (${optimization.mode} ëª¨ë“œ) [ì „ëµ: ${strategyNames}]`, 'info');
                    
                    const interval = setInterval(() => {
                        optimization.progress += 5;
                        if (optimization.progress % 20 === 0) addLog(`ìµœì í™” ì§„í–‰ ì¤‘... ${optimization.progress}%`, 'info');
                        if (optimization.progress >= 100) {
                            clearInterval(interval);
                            optimization.running = false;
                            
                            // ì‹œë®¬ë ˆì´ì…˜: ìƒìœ„ 5ê°œ ê²°ê³¼ ìƒì„± (ì„ íƒëœ ì „ëµ ê¸°ë°˜)
                            const strategies = getSelectedStrategies();
                            const useMacd = strategies.includes('macd');
                            const useAdxdi = strategies.includes('adxdi');
                            
                            optimization.topResults = [
                                { strategy: useMacd ? 'macd' : 'adxdi', atr: 1.5, win_rate: 72.3, return: 245.6, mdd: 8.5, params: { macd_fast: 5, macd_slow: 20, atr_mult: 1.5, rsi_period: 12, leverage: 10 } },
                                { strategy: useAdxdi ? 'adxdi' : 'macd', atr: 1.25, win_rate: 70.1, return: 198.2, mdd: 10.2, params: { macd_fast: 6, macd_slow: 18, atr_mult: 1.25, rsi_period: 14, leverage: 10 } },
                                { strategy: useMacd ? 'macd' : 'adxdi', atr: 1.75, win_rate: 68.5, return: 175.8, mdd: 12.1, params: { macd_fast: 5, macd_slow: 22, atr_mult: 1.75, rsi_period: 10, leverage: 8 } },
                                { strategy: useAdxdi ? 'adxdi' : 'macd', atr: 1.3, win_rate: 67.2, return: 156.3, mdd: 9.8, params: { macd_fast: 7, macd_slow: 19, atr_mult: 1.3, rsi_period: 12, leverage: 10 } },
                                { strategy: useMacd ? 'macd' : 'adxdi', atr: 2.0, win_rate: 65.8, return: 142.1, mdd: 14.5, params: { macd_fast: 4, macd_slow: 24, atr_mult: 2.0, rsi_period: 16, leverage: 5 } },
                            ];
                            
                            // ìµœì  ê²°ê³¼ (1ìœ„)
                            optimization.result = { 
                                params: optimization.topResults[0].params, 
                                return: optimization.topResults[0].return, 
                                win_rate: optimization.topResults[0].win_rate, 
                                sharpe: 2.1,
                                mdd: optimization.topResults[0].mdd
                            };
                            
                            addLog(`âœ… ìµœì í™” ì™„ë£Œ! ${optimization.topResults.length}ê°œ ê²°ê³¼ ì¤‘ ìµœì : +${optimization.result.return}%`, 'success');
                            showToast('ìµœì í™”ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                            
                            // ìë™ìœ¼ë¡œ í”„ë¦¬ì…‹ ì €ì¥
                            applyOptimalParams();
                        }
                    }, 200);
                };
                
                const stopOptimization = () => {
                    optimization.running = false;
                    addLog('â¹ï¸ ìµœì í™”ê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤', 'warning');
                    showToast('ìµœì í™” ì¤‘ì§€ë¨', 'warning');
                };
                
                const applyOptimalParams = () => {
                    if (!optimization.result) {
                        showToast('ì ìš©í•  ìµœì í™” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤', 'error');
                        return;
                    }
                    
                    // í”„ë¦¬ì…‹ ë°ì´í„° ìƒì„±
                    const presetData = {
                        _meta: {
                            symbol: optimization.symbol,
                            exchange: 'bybit',
                            timeframe: optimization.timeframe,
                            created: new Date().toISOString(),
                            // [NEW] ì „ëµ ì •ë³´ í¬í•¨
                            strategies: getSelectedStrategies()
                        },
                        _result: {
                            win_rate: optimization.result.win_rate,
                            total_return: optimization.result.return,
                            mdd: optimization.result.mdd,
                            sharpe: optimization.result.sharpe
                        },
                        params: optimization.result.params
                    };
                    
                    // í”„ë¦¬ì…‹ ì´ë¦„ ìƒì„±
                    const presetName = `bybit_${optimization.symbol}_${optimization.timeframe}`;
                    
                    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— í”„ë¦¬ì…‹ ì €ì¥
                    const presets = JSON.parse(localStorage.getItem('presets') || '{}');
                    presets[presetName] = presetData;
                    localStorage.setItem('presets', JSON.stringify(presets));
                    
                    addLog(`âœ… í”„ë¦¬ì…‹ ì €ì¥ë¨: ${presetName}`, 'success');
                    addLog(`   íŒŒë¼ë¯¸í„°: ${JSON.stringify(optimization.result.params)}`, 'info');
                    addLog(`   ìˆ˜ìµë¥ : +${optimization.result.return}% | ìŠ¹ë¥ : ${optimization.result.win_rate}% | MDD: -${optimization.result.mdd}%`, 'info');
                    showToast(`í”„ë¦¬ì…‹ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: ${presetName}`, 'success');
                };
                
                const applyResultParams = (result) => {
                    // íŠ¹ì • ê²°ê³¼ë¥¼ ì„ íƒí•˜ì—¬ ì ìš©
                    optimization.result = {
                        params: result.params,
                        return: result.return,
                        win_rate: result.win_rate,
                        mdd: result.mdd,
                        sharpe: 2.0 + Math.random() * 0.5
                    };
                    
                    addLog(`ğŸ¯ ê²°ê³¼ #${optimization.topResults.indexOf(result) + 1} ì„ íƒë¨ (ATR: ${result.atr}, ìˆ˜ìµë¥ : +${result.return}%)`, 'info');
                    applyOptimalParams();
                };
                
                // ========== ì„¤ì • íƒ­ ê¸°ëŠ¥ ==========
                const toggleApiKey = (ex) => {
                    settings.apiKeys[ex] = !settings.apiKeys[ex];
                    addLog(`${ex.toUpperCase()} API í‚¤ ${settings.apiKeys[ex] ? 'ì„¤ì •ë¨' : 'í•´ì œë¨'}`, settings.apiKeys[ex] ? 'success' : 'warning');
                };
                
                const testAllConnections = () => {
                    addLog('ëª¨ë“  ê±°ë˜ì†Œ ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...', 'info');
                    exchanges.value.forEach((ex, i) => {
                        setTimeout(() => {
                            const success = Math.random() > 0.3;
                            addLog(`${ex.toUpperCase()}: ${success ? 'âœ… ì—°ê²° ì„±ê³µ' : 'âŒ ì—°ê²° ì‹¤íŒ¨'}`, success ? 'success' : 'error');
                        }, i * 300);
                    });
                };
                
                const toggleTelegram = () => addLog(`í…”ë ˆê·¸ë¨ ì•Œë¦¼ ${settings.telegram.enabled ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}`, 'info');
                const testTelegram = () => { addLog('í…”ë ˆê·¸ë¨ í…ŒìŠ¤íŠ¸ ì•Œë¦¼ ì „ì†¡ ì¤‘...', 'info'); setTimeout(() => { addLog('âœ… í…ŒìŠ¤íŠ¸ ì•Œë¦¼ì´ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤', 'success'); showToast('í…ŒìŠ¤íŠ¸ ì•Œë¦¼ ì „ì†¡ë¨', 'success'); }, 1000); };
                const saveTelegramSettings = () => { addLog('í…”ë ˆê·¸ë¨ ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success'); showToast('ì„¤ì • ì €ì¥ë¨', 'success'); };
                const changeTheme = () => addLog(`í…Œë§ˆ ë³€ê²½: ${settings.theme}`, 'info');
                const changeLanguage = () => addLog(`ì–¸ì–´ ë³€ê²½: ${settings.language === 'ko' ? 'í•œêµ­ì–´' : 'English'}`, 'info');
                const exportSettings = () => { addLog('ì„¤ì • ë‚´ë³´ë‚´ê¸°...', 'info'); setTimeout(() => { addLog('âœ… settings_backup.json ì €ì¥ë¨', 'success'); showToast('ì„¤ì •ì´ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤', 'success'); }, 500); };
                const importSettings = () => { addLog('ì„¤ì • ê°€ì ¸ì˜¤ê¸°...', 'info'); setTimeout(() => { addLog('âœ… ì„¤ì •ì´ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤', 'success'); showToast('ì„¤ì • ë³µì›ë¨', 'success'); }, 500); };
                const resetSettings = () => { addLog('âš ï¸ ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'warning'); showToast('ì„¤ì • ì´ˆê¸°í™”ë¨', 'warning'); };
                
                // ========== ë¼ì´ì„ ìŠ¤ ê²€ì¦ (ADMIN ì „ìš©) ==========
                const verifyLicenseCode = async () => {
                    const code = licenseVerify.code.trim();
                    const tier = licenseVerify.tier;
                    
                    if (!code) {
                        showToast('ë¼ì´ì„ ìŠ¤ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”', 'error');
                        return;
                    }
                    
                    if (code.length < 8) {
                        showToast('ì½”ë“œëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤', 'error');
                        return;
                    }
                    
                    addLog(`ğŸ” ë¼ì´ì„ ìŠ¤ ê²€ì¦ ì¤‘: ${code.substring(0, 8)}...`, 'info');
                    
                    try {
                        // API í˜¸ì¶œ (ì‹œë®¬ë ˆì´ì…˜)
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        // í…ŒìŠ¤íŠ¸: ADMIN, TEST, VALIDë¡œ ì‹œì‘í•˜ë©´ ì„±ê³µ
                        const isValid = code.toUpperCase().startsWith('ADMIN') || 
                                       code.toUpperCase().startsWith('TEST') ||
                                       code.toUpperCase().startsWith('VALID');
                        
                        if (isValid) {
                            licenseVerify.result = {
                                success: true,
                                message: `ì½”ë“œ: ${code.substring(0, 8)}...${code.slice(-4)} | ë“±ê¸‰: ${tier} | ì²˜ë¦¬: ${new Date().toLocaleString('ko-KR')}`
                            };
                            addLog(`âœ… ë¼ì´ì„ ìŠ¤ ê²€ì¦ ì„±ê³µ - ë“±ê¸‰ ${tier} ë¶€ì—¬`, 'success');
                            showToast(`${tier} ë“±ê¸‰ì´ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
                            licenseVerify.code = '';
                        } else {
                            licenseVerify.result = {
                                success: false,
                                message: 'ìœ íš¨í•˜ì§€ ì•Šì€ ë¼ì´ì„ ìŠ¤ ì½”ë“œì…ë‹ˆë‹¤.'
                            };
                            addLog('âŒ ë¼ì´ì„ ìŠ¤ ê²€ì¦ ì‹¤íŒ¨ - ìœ íš¨í•˜ì§€ ì•Šì€ ì½”ë“œ', 'error');
                            showToast('ê²€ì¦ ì‹¤íŒ¨', 'error');
                        }
                    } catch (e) {
                        licenseVerify.result = { success: false, message: `ì˜¤ë¥˜: ${e.message}` };
                        addLog(`âŒ ê²€ì¦ ì˜¤ë¥˜: ${e.message}`, 'error');
                    }
                };
                
                // ========== ê±°ë˜ ë‚´ì—­ íƒ­ ê¸°ëŠ¥ ==========
                const filteredHistory = computed(() => {
                    let result = tradeHistory.value;
                    if (historyFilter.exchange) result = result.filter(t => t.exchange === historyFilter.exchange);
                    if (historyFilter.result === 'profit') result = result.filter(t => t.pnl >= 0);
                    if (historyFilter.result === 'loss') result = result.filter(t => t.pnl < 0);
                    return result;
                });
                
                const filterHistory = () => addLog(`í•„í„° ì ìš©: ê±°ë˜ì†Œ=${historyFilter.exchange || 'ì „ì²´'}, ê²°ê³¼=${historyFilter.result || 'ì „ì²´'}`, 'info');
                const refreshHistory = () => { addLog('ê±°ë˜ ë‚´ì—­ ìƒˆë¡œê³ ì¹¨ ì¤‘...', 'info'); fetchHistory(); };
                const exportHistory = () => { addLog('CSV ë‚´ë³´ë‚´ê¸° ì¤‘...', 'info'); setTimeout(() => { addLog('âœ… trade_history.csv ì €ì¥ë¨', 'success'); showToast('CSV ë‚´ë³´ë‚´ê¸° ì™„ë£Œ', 'success'); }, 500); };
                const addTestTrade = () => {
                    const t = { id: Date.now(), datetime: new Date().toLocaleString('ko-KR'), exchange: exchanges.value[Math.floor(Math.random() * 3)],
                        symbol: symbols.value[Math.floor(Math.random() * 5)], side: Math.random() > 0.5 ? 'Long' : 'Short',
                        pnl: parseFloat((Math.random() * 300 - 100).toFixed(2)), pnl_pct: parseFloat((Math.random() * 10 - 3).toFixed(2)) };
                    tradeHistory.value.unshift(t);
                    addLog(`â• í…ŒìŠ¤íŠ¸ ê±°ë˜ ì¶”ê°€: ${t.symbol} ${t.side} ($${t.pnl})`, 'info');
                };
                const clearHistory = () => { tradeHistory.value = []; addLog('ê±°ë˜ ë‚´ì—­ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'warning'); };
                
                // ========== ë°ì´í„° ìˆ˜ì§‘ íƒ­ ê¸°ëŠ¥ ==========
                const selectSymbolForDownload = (sym) => { dataCollection.symbol = sym; addLog(`ë‹¤ìš´ë¡œë“œ ì‹¬ë³¼ ì„ íƒ: ${sym}`, 'info'); };
                const startDownload = () => {
                    dataCollection.downloading = true; dataCollection.progress = 0;
                    addLog(`ë°ì´í„° ë‹¤ìš´ë¡œë“œ ì‹œì‘: ${dataCollection.exchange}/${dataCollection.symbol}/${dataCollection.timeframe} (${dataCollection.days}ì¼)`, 'info');
                    const interval = setInterval(() => {
                        dataCollection.progress += 10;
                        if (dataCollection.progress >= 100) {
                            clearInterval(interval);
                            dataCollection.downloading = false;
                            const file = { name: `${dataCollection.symbol}_${dataCollection.timeframe}_${dataCollection.days}d.csv`, size: `${(Math.random() * 5 + 1).toFixed(1)} MB` };
                            downloadedFiles.value.push(file);
                            addLog(`âœ… ë‹¤ìš´ë¡œë“œ ì™„ë£Œ: ${file.name}`, 'success');
                            showToast('ë‹¤ìš´ë¡œë“œ ì™„ë£Œ', 'success');
                        }
                    }, 300);
                };
                const stopDownload = () => { dataCollection.downloading = false; addLog('â¹ï¸ ë‹¤ìš´ë¡œë“œê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤', 'warning'); };
                const deleteFile = (name) => { downloadedFiles.value = downloadedFiles.value.filter(f => f.name !== name); addLog(`ğŸ—‘ï¸ íŒŒì¼ ì‚­ì œ: ${name}`, 'warning'); };
                
                // ========== ìë™ë§¤ë§¤ íƒ­ ê¸°ëŠ¥ ==========
                let autoInterval = null;
                const startAutoTrading = () => {
                    autoTrading.running = true; autoTrading.uptime = 0;
                    const modeText = autoTrading.capitalMode === 'compound' ? 'ë³µë¦¬' : 'ê³ ì •';
                    addLog(`ğŸ¤– ìë™ë§¤ë§¤ ì‹œì‘: ${autoTrading.exchange} (${modeText} ëª¨ë“œ, ê°ì‹œ: ${autoTrading.watchCount}ê°œ, ì‹œë“œ: $${autoTrading.initialSeed})`, 'success');
                    showToast('ìë™ë§¤ë§¤ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                    autoInterval = setInterval(() => {
                        autoTrading.uptime += 1;
                        if (Math.random() > 0.9) {
                            autoTrading.tradesToday += 1;
                            // [NEW] ë³µë¦¬/ê³ ì • ëª¨ë“œì— ë”°ë¥¸ PnL ê³„ì‚°
                            const tradeSize = autoTrading.capitalMode === 'compound' 
                                ? autoTrading.currentBalance 
                                : autoTrading.initialSeed;
                            const pnlPercent = (Math.random() * 10 - 3); // -3% ~ +7%
                            const pnl = parseFloat((tradeSize * pnlPercent / 100).toFixed(2));
                            autoTrading.pnlToday += pnl;
                            autoTrading.currentBalance += pnl;  // [NEW] ì”ê³  ì—…ë°ì´íŠ¸
                            autoTrading.winRate = Math.round((autoTrading.tradesToday > 0 ? (autoTrading.pnlToday > 0 ? 60 + Math.random() * 20 : 40 + Math.random() * 20) : 0));
                            addLog(`ğŸ”” ìë™ ê±°ë˜ ì²´ê²°: ${pnl >= 0 ? '+' : ''}$${pnl} (ì”ê³ : $${autoTrading.currentBalance.toFixed(2)})`, pnl >= 0 ? 'success' : 'warning');
                        }
                    }, 1000);
                };
                const stopAutoTrading = () => {
                    autoTrading.running = false;
                    if (autoInterval) { clearInterval(autoInterval); autoInterval = null; }
                    addLog(`â¹ï¸ ìë™ë§¤ë§¤ ì¤‘ì§€ (ì´ ${autoTrading.tradesToday}ê±´, $${autoTrading.pnlToday.toFixed(2)})`, 'warning');
                    showToast('ìë™ë§¤ë§¤ê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤', 'warning');
                };
                const restartAutoTrading = () => { stopAutoTrading(); setTimeout(startAutoTrading, 500); addLog('ğŸ”„ ìë™ë§¤ë§¤ ì¬ì‹œì‘', 'info'); };
                const addTestSignal = () => {
                    const signal = { id: Date.now(), symbol: symbols.value[Math.floor(Math.random() * 5)], type: Math.random() > 0.5 ? 'Long' : 'Short', time: new Date().toLocaleTimeString('ko-KR') };
                    autoTrading.signals.unshift(signal);
                    if (autoTrading.signals.length > 10) autoTrading.signals.pop();
                    addLog(`ğŸ“¡ ì‹ í˜¸ ê°ì§€: ${signal.symbol} ${signal.type}`, 'info');
                };
                
                // ========== ë°ì´í„° fetch ==========
                const fetchData = async () => {
                    try {
                        const res = await fetch(`${API_URL}/health`);
                        if (res.ok) { connected.value = true; }
                    } catch (e) { connected.value = false; }
                };
                
                const fetchHistory = async () => {
                    try {
                        const res = await fetch(`${API_URL}/history/trades`);
                        if (res.ok) { const data = await res.json(); tradeHistory.value = data.trades; addLog(`âœ… ê±°ë˜ ë‚´ì—­ ë¡œë“œ: ${data.trades.length}ê±´`, 'success'); }
                    } catch (e) { addLog(`âŒ ê±°ë˜ ë‚´ì—­ ë¡œë“œ ì‹¤íŒ¨`, 'error'); }
                };
                
                setInterval(() => { currentTime.value = new Date().toLocaleString('ko-KR'); }, 1000);
                
                onMounted(() => {
                    fetchData(); fetchHistory();
                    addLog('ğŸš€ TwinStar Quantum Web ì‹œì‘ë¨', 'success');
                    setInterval(fetchData, 30000);
                });
                
                return {
                    connected, currentTime, activeTab, tabs, logs, toast,
                    exchanges, symbols, timeframes, positions, tradeHistory, downloadedFiles,
                    dashboard, trade, backtest, backtestResult, optimization, settings, historyFilter, dataCollection, autoTrading,
                    userTier, licenseVerify,  // ë¼ì´ì„ ìŠ¤ ê²€ì¦
                    guideActiveTab, guideTabs, guideData,  // ë„ì›€ë§ íƒ­
                    formatCurrency, formatPnl, formatUptime, showToast, addLog, clearLogs, switchTab,
                    onExchangeChange, onSymbolChange, executeTrade, refreshBalance, connectExchange, addTestPosition, closePosition,
                    runBacktest, loadDefaultParams, saveBacktestResult, clearBacktestResult,
                    startOptimization, stopOptimization, applyOptimalParams, applyResultParams, validateStrategySelection, getSelectedStrategies,
                    toggleApiKey, testAllConnections, toggleTelegram, testTelegram, saveTelegramSettings, changeTheme, changeLanguage, exportSettings, importSettings, resetSettings,
                    verifyLicenseCode,  // ë¼ì´ì„ ìŠ¤ ê²€ì¦ í•¨ìˆ˜
                    filteredHistory, filterHistory, refreshHistory, exportHistory, addTestTrade, clearHistory,
                    selectSymbolForDownload, startDownload, stopDownload, deleteFile,
                    startAutoTrading, stopAutoTrading, restartAutoTrading, addTestSignal
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
